{
  "name" : "Case Activity Register",
  "uuid" : "75eeda07-4ac5-44cf-941b-1cf79f750f78",
  "formType" : "Encounter",
  "formElementGroups" : [ {
    "uuid" : "c6bc8866-a0c9-418b-9fa0-726281b97c5e",
    "name" : "Activity Register",
    "displayOrder" : 1.0,
    "formElements" : [ {
      "name" : "Was it a court hearing date?",
      "uuid" : "2f65a840-fde5-49af-abd3-33bf6ef47ffa",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Was it a court hearing date?",
        "uuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "03ead610-1596-4a1f-b57d-07792c6e66b6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    } ],
    "voided" : true,
    "display" : "Activity Register",
    "timed" : false
  }, {
    "uuid" : "b7396bb5-b994-493c-a41f-c09185ced79d",
    "name" : "Activity  Details",
    "displayOrder" : 2.0,
    "formElements" : [ {
      "name" : "Fill the details of Action Taken",
      "uuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "keyValues" : [ {
        "key" : "repeatable",
        "value" : true
      } ],
      "concept" : {
        "name" : "Fill the details of Action Taken",
        "uuid" : "851c4b67-1b4f-4e1a-858f-57bd2762fd15",
        "dataType" : "QuestionGroup",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "mandatory" : false
    }, {
      "name" : "Was it a court hearing date?",
      "uuid" : "beb0e136-0e70-4dc5-a0ec-01a9c1ed0bef",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Was it a court hearing date?",
        "uuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "03ead610-1596-4a1f-b57d-07792c6e66b6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Date",
      "uuid" : "ca6f998f-6ddc-4a28-be38-4823700c4000",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of Case Activity",
        "uuid" : "9877b612-293f-4e05-8bcd-418c1cd96a33",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  const questionGroupIndex = params.questionGroupIndex;\n  let caseActivityDetails = encounter.getObservationValue(\"851c4b67-1b4f-4e1a-858f-57bd2762fd15\");\n  \n  if(caseActivityDetails && caseActivityDetails.length > 0){\n\n    let currentQuestionGroup = caseActivityDetails[questionGroupIndex]\n    let selectedDate = currentQuestionGroup.findObservationByConceptUUID('9877b612-293f-4e05-8bcd-418c1cd96a33');\n\n    if(selectedDate) {\n      \n      const currentDate = moment().startOf('day');\n      selectedDate = moment(selectedDate.getValue()).startOf('day');\n      if(selectedDate.isAfter(currentDate)){\n          validationErrors.push(\"Invalid date: Future dates are not allowed\");\n      }\n    } \n  }\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", params.questionGroupIndex).containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n    visibility = condition11 ;\n\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Action Taken",
      "uuid" : "c8ab7ee5-f3f0-4561-9d5b-75ce4714abd3",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Action Taken",
        "uuid" : "08799bd8-e55f-4345-8c59-f5ef05e11b5d",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", params.questionGroupIndex).containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "questionGroupEncounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded",
                "parentConceptUuid" : "851c4b67-1b4f-4e1a-858f-57bd2762fd15"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "No" ],
                "answerConceptUuids" : [ "03ead610-1596-4a1f-b57d-07792c6e66b6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Next step",
      "uuid" : "45ac9280-7bc2-4b1a-a830-c57a53befc3a",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Next step",
        "uuid" : "1d638e6a-05af-48c9-9cc3-1699198a4766",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", params.questionGroupIndex).containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "questionGroupEncounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded",
                "parentConceptUuid" : "851c4b67-1b4f-4e1a-858f-57bd2762fd15"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "No" ],
                "answerConceptUuids" : [ "03ead610-1596-4a1f-b57d-07792c6e66b6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Deadline for next step",
      "uuid" : "ecc0e357-087b-4245-b41a-875fe237446d",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Deadline for next step",
        "uuid" : "bb454daf-872a-4eb5-bbab-a595fdbe89a6",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  const questionGroupIndex = params.questionGroupIndex;\n\n  let caseActivityDetails = encounter.getObservationValue(\"851c4b67-1b4f-4e1a-858f-57bd2762fd15\");\n  \n  if (caseActivityDetails && caseActivityDetails.length > 0) {\n    let currentQuestionGroup = caseActivityDetails[questionGroupIndex];\n    let selectedDate = currentQuestionGroup.findObservationByConceptUUID('bb454daf-872a-4eb5-bbab-a595fdbe89a6');\n\n    if (selectedDate) {\n      const currentDate = moment().startOf('day');\n      selectedDate = moment(selectedDate.getValue()).startOf('day');\n\n      // Only allow today or future dates\n      if (selectedDate.isBefore(currentDate)) {\n        validationErrors.push(\"Invalid date: Past dates are not allowed\");\n      }\n    }\n  }\n\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement})\n    .when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", questionGroupIndex)\n    .containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\")\n    .matches();\n  \n  visibility = condition11;\n\n  return new imports.rulesConfig.FormElementStatus(\n    formElement.uuid,\n    visibility,\n    value,\n    answersToSkip,\n    validationErrors\n  );\n};\n",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Court Date",
      "uuid" : "82f0c5af-b21c-4ee0-8876-6b66b11cab52",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "calendar"
      } ],
      "concept" : {
        "name" : "Court Date",
        "uuid" : "b3fead90-03de-4538-864f-7273b04995c2",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 7.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", params.questionGroupIndex).containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "What happened in the court date",
      "uuid" : "b862a46e-4b3b-406d-a7e0-f64b5b5ec46f",
      "keyValues" : [ ],
      "concept" : {
        "name" : "What happened in the court date",
        "uuid" : "f1e37284-3676-4fcd-a21c-a224d4c401a9",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 8.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", params.questionGroupIndex).containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Next Step",
      "uuid" : "bf450a7e-4f3e-4c6d-ab31-31612c43ce85",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Next Step",
        "uuid" : "25176546-a0cb-4a59-a1b8-f927fd0106f1",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 9.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", params.questionGroupIndex).containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Deadline for Next Step",
      "uuid" : "3ff83653-137c-4e31-a2fe-9a5b6ba73391",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Deadline for Next Step 2",
        "uuid" : "0bd330d0-c7dc-4586-a127-02cc40f2a065",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 10.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  const questionGroupIndex = params.questionGroupIndex;\n\n  let caseActivityDetails = encounter.getObservationValue(\"851c4b67-1b4f-4e1a-858f-57bd2762fd15\");\n  \n  if (caseActivityDetails && caseActivityDetails.length > 0) {\n    let currentQuestionGroup = caseActivityDetails[questionGroupIndex];\n    let selectedDate = currentQuestionGroup.findObservationByConceptUUID('0bd330d0-c7dc-4586-a127-02cc40f2a065');\n\n    if (selectedDate) {\n      const currentDate = moment().startOf('day');\n      selectedDate = moment(selectedDate.getValue()).startOf('day');\n\n      // Only allow today or future dates\n      if (selectedDate.isBefore(currentDate)) {\n        validationErrors.push(\"Invalid date: Past dates are not allowed\");\n      }\n    }\n  }\n\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement})\n    .when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", questionGroupIndex)\n    .containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\")\n    .matches();\n  \n  visibility = condition11;\n\n  return new imports.rulesConfig.FormElementStatus(\n    formElement.uuid,\n    visibility,\n    value,\n    answersToSkip,\n    validationErrors\n  );\n};\n",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "mandatory" : true
    }, {
      "name" : "Deadline for next step 2",
      "uuid" : "f67bda21-46bd-4e16-8bae-af915697c96f",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Deadline for next step",
        "uuid" : "bb454daf-872a-4eb5-bbab-a595fdbe89a6",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 11.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  const questionGroupIndex = params.questionGroupIndex;\n\n  let caseActivityDetails = encounter.getObservationValue(\"851c4b67-1b4f-4e1a-858f-57bd2762fd15\");\n  \n  if (caseActivityDetails && caseActivityDetails.length > 0) {\n    let currentQuestionGroup = caseActivityDetails[questionGroupIndex];\n    let selectedDate = currentQuestionGroup.findObservationByConceptUUID('bb454daf-872a-4eb5-bbab-a595fdbe89a6');\n\n    if (selectedDate) {\n      const currentDate = moment().startOf('day');\n      selectedDate = moment(selectedDate.getValue()).startOf('day');\n\n      // Only allow today or future dates\n      if (selectedDate.isBefore(currentDate)) {\n        validationErrors.push(\"Invalid date: Past dates are not allowed\");\n      }\n    }\n  }\n\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement})\n    .when.questionGroupValueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\", \"851c4b67-1b4f-4e1a-858f-57bd2762fd15\", questionGroupIndex)\n    .containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\")\n    .matches();\n  \n  visibility = condition11;\n\n  return new imports.rulesConfig.FormElementStatus(\n    formElement.uuid,\n    visibility,\n    value,\n    answersToSkip,\n    validationErrors\n  );\n};\n",
      "parentFormElementUuid" : "36b8d3f9-0cce-4205-ba84-5be77f372c03",
      "voided" : true,
      "mandatory" : true
    } ],
    "display" : "Activity  Details",
    "timed" : false
  }, {
    "uuid" : "7af406f9-c36f-497f-b41e-2076ec9029f5",
    "name" : "Fill the details of Action Taken",
    "displayOrder" : 3.0,
    "formElements" : [ {
      "name" : "Was it a court hearing date?",
      "uuid" : "4a5fd26c-3fcc-42aa-975e-1fb605a194dc",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Was it a court hearing date?",
        "uuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "03ead610-1596-4a1f-b57d-07792c6e66b6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Date",
      "uuid" : "c6a6e228-6749-4081-b998-a9037ada87fc",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of Case Activity",
        "uuid" : "9877b612-293f-4e05-8bcd-418c1cd96a33",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"2413000f-51f0-4cab-8ed7-7b61d2614d83\").defined.matches();\n  \n  if(condition11 ){\n    let selectedDate = encounter.getObservationReadableValue(\"2413000f-51f0-4cab-8ed7-7b61d2614d83\") \n\n  const currentDate = moment().startOf('day');\n  selectedDate = moment(selectedDate).startOf('day');\n\n  if (selectedDate.isAfter(currentDate)) {\n    validationErrors.push(\"Invalid date: Future dates are not allowed\");\n  }\n  \n} else {\n  value = moment().startOf('day')\n}\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : true
    } ],
    "voided" : true,
    "display" : "Fill the details of Action Taken",
    "timed" : false
  }, {
    "uuid" : "f425b4ab-28d7-4c68-b56d-130cadafb1ac",
    "name" : "Details of Action Taken",
    "displayOrder" : 4.0,
    "formElements" : [ {
      "name" : "Date",
      "uuid" : "62ce9163-02b4-4662-9670-1ee0f0bf0265",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Court Hearing Date",
        "uuid" : "19152806-3f7d-462e-a3f3-2147a0f94ce8",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let selectedDate = encounter.getObservationValue(\"19152806-3f7d-462e-a3f3-2147a0f94ce8\");\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n  visibility = condition11 ;\n  if(selectedDate){\n   const currentDate = moment().startOf('day');\n      selectedDate = moment(selectedDate).startOf('day');\n      if(selectedDate.isAfter(currentDate)){\n          validationErrors.push(\"Invalid date: Future dates are not allowed\");\n      }\n    }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Action Taken",
      "uuid" : "ad7628f5-908f-41b6-812e-9d29be6e3a11",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Action Taken",
        "uuid" : "08799bd8-e55f-4345-8c59-f5ef05e11b5d",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "No" ],
                "answerConceptUuids" : [ "03ead610-1596-4a1f-b57d-07792c6e66b6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Next step",
      "uuid" : "ef408029-c35c-4aef-a805-f9308fc5872a",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Next step",
        "uuid" : "1d638e6a-05af-48c9-9cc3-1699198a4766",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "No" ],
                "answerConceptUuids" : [ "03ead610-1596-4a1f-b57d-07792c6e66b6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Deadline for next step",
      "uuid" : "20ef1e98-c8f0-4b09-a08a-3eb59e6b609a",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Deadline for next step 1",
        "uuid" : "3fe8e744-2225-420a-8d00-93f16cacf77b",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let selectedDate = encounter.getObservationValue(\"3fe8e744-2225-420a-8d00-93f16cacf77b\");\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"03ead610-1596-4a1f-b57d-07792c6e66b6\").matches();\n  \n  visibility = condition11 ;\n   if (selectedDate) {\n    const currentDate = moment().startOf('day');\n    selectedDate = moment(selectedDate).startOf('day');\n    \n    if (selectedDate.isBefore(currentDate)) {\n      validationErrors.push(\"Invalid date: Past dates are not allowed\");\n    }\n  }\n\n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "Date in current stage",
      "uuid" : "e4eda68c-a402-4881-8831-9908213390d3",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "calendar"
      } ],
      "concept" : {
        "name" : "Date in current stage",
        "uuid" : "38a6f99a-2dea-44dc-b189-3811fd2c8cb1",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Current stage",
      "uuid" : "141e781a-a688-482f-a19b-ea779d50e8d8",
      "keyValues" : [ {
        "key" : "editable",
        "value" : false
      } ],
      "concept" : {
        "name" : "Current stage",
        "uuid" : "a8406394-a266-47d5-a3f5-443b885cf830",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  const individual = encounter.individual;\n  \n  \n  let caseStatusDetails = individual.enrolments.filter((enr) => \n    enr.program.name === \"Case Status\" && \n    enr.programExitDateTime == null && \n    !enr.voided \n  );\n  \n\n    const autoCaptureStage = {\n      'e1945ebb-19df-4055-b9c2-9fbcda959671': \"Stage of Active (pre-litigation) - Criminal Prosecution/ Defence fresh filing\",\n      'ee698620-9b14-4379-a7de-6098c9f009b0': \"Stage of Active (litigation) status - Criminal Prosecution/ Defence fresh filing\",\n      'c4d9571c-1f78-45d7-a415-83589595ae9d': \"Stage of Active (pre-litigation) - Civil / revenue / labour / consumer / family etc. fresh filing\",\n      'aa7cfb95-21f2-48fb-9c28-e6a46c3d88a8':'Stage of Active (litigation) status - Civil / revenue / labour / consumer / family etc. fresh filing',\n      'c8bafd78-6fdf-48ac-bd54-f180b00ce46f':'Stage of Active (pre-litigation)',\n      '065e005a-3203-4192-91ad-37e55480a695':'Stage of Active (litigation) status'\n\n    }; \n\n if(caseStatusDetails.length>0){\n    let latestcaseStatusDetails = caseStatusDetails[0];\n    let uuids = Object.keys(autoCaptureStage);\n    for (let i=0; i<uuids.length;i++){\n        const uuid = uuids[i];\n        const observationValue = latestcaseStatusDetails.getObservationReadableValue(uuid);\n        if(observationValue){\n            value = observationValue;\n            break;\n        }\n    }\n    if (value == null){\n        const statusOfCaseUuid = \"b1927aeb-ab4c-46a6-8eff-6ccdf38f5478\";\n        value = latestcaseStatusDetails.getObservationReadableValue(statusOfCaseUuid);\n    }\n }\n\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "What happened in the court date",
      "uuid" : "ef5ce998-56f5-4263-b411-3e3806092799",
      "keyValues" : [ ],
      "concept" : {
        "name" : "What happened in the court date",
        "uuid" : "f1e37284-3676-4fcd-a21c-a224d4c401a9",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 7.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Any additional work undertaken",
      "uuid" : "e6b27b36-2624-4023-a436-c86d4f0d7098",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Any additional work undertaken",
        "uuid" : "759d449e-a4a9-4177-9185-c26de83c7784",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 8.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "Next date",
      "uuid" : "a441c4f6-9098-4ef6-92d9-5b54f16f38e9",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Next date",
        "uuid" : "cd8aa6fb-9277-47a5-b082-a70c76d3cc56",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 9.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let selectedDate = encounter.getObservationValue(\"cd8aa6fb-9277-47a5-b082-a70c76d3cc56\");\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  if (selectedDate) {\n    const currentDate = moment().startOf('day');\n    selectedDate = moment(selectedDate).startOf('day');\n    \n    if (selectedDate.isBefore(currentDate)) {\n      validationErrors.push(\"Invalid date: Past dates are not allowed\");\n    }\n  }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "Stage in next Date",
      "uuid" : "b3e3bd41-2050-475f-a97b-c12fc4d270bc",
      "keyValues" : [ {
        "key" : "editable",
        "value" : false
      } ],
      "concept" : {
        "name" : "Stage in next Date",
        "uuid" : "339475ca-744b-45f1-a8c7-317eda0d04e8",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 10.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  const individual = encounter.individual;\n  \n   let caseStatusDetails = individual.enrolments.filter((enr) => \n    enr.program.name === \"Case Status\" && \n    enr.programExitDateTime == null && \n    !enr.voided \n  );\n    const autoCaptureStage = {\n        'e1945ebb-19df-4055-b9c2-9fbcda959671': \"Stage of Active (pre-litigation) - Criminal Prosecution/ Defence fresh filing\",\n        'ee698620-9b14-4379-a7de-6098c9f009b0': \"Stage of Active (litigation) status - Criminal Prosecution/ Defence fresh filing\",\n        'c4d9571c-1f78-45d7-a415-83589595ae9d': \"Stage of Active (pre-litigation) - Civil / revenue / labour / consumer / family etc. fresh filing\",\n        'aa7cfb95-21f2-48fb-9c28-e6a46c3d88a8':'Stage of Active (litigation) status - Civil / revenue / labour / consumer / family etc. fresh filing',\n        'c8bafd78-6fdf-48ac-bd54-f180b00ce46f':'Stage of Active (pre-litigation)',\n        '065e005a-3203-4192-91ad-37e55480a695':'Stage of Active (litigation) status'\n      }; \n\n    if(caseStatusDetails.length>0){\n        let latestcaseStatusDetails = caseStatusDetails[0];\n        let uuids = Object.keys(autoCaptureStage);\n        for (let i=0; i<uuids.length;i++){\n            const uuid = uuids[i];\n            const observation = latestcaseStatusDetails.findObservation(uuid);\n            if(observation && observation.getValue()){\n                \n                const observationValue = observation.getValue();\n                let options = observation.concept.answers;\n                options = _.sortBy(options, 'answerOrder');\n                let answerOrder = null;\n                for(let j = 0; j < options.length; j++){\n                    if(observationValue == options[j].concept.uuid){\n                        answerOrder = j;\n                        break;\n                    }\n                }\n                if(answerOrder !== null && (options.length - 1) != answerOrder){\n                    value = options[answerOrder + 1].concept.name;\n                }\n                break;\n            }\n        }\n    }\n\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n\n  if(visibility && value == null){\n    value = \"There is no next stage\";\n  }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "Next Step",
      "uuid" : "7127cd60-4f3c-45b5-ab0b-5be57b1a1aa3",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Next Step",
        "uuid" : "25176546-a0cb-4a59-a1b8-f927fd0106f1",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 11.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Was it a court hearing date?",
                "conceptUuid" : "12003b39-078c-4f63-aa93-ecfb2e774557",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Deadline for next step",
      "uuid" : "f38f395b-3f87-45d6-ada7-5227c4665a4e",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Deadline for next step 2",
        "uuid" : "a6c6fce6-8bd4-4117-85c1-5d05efe923c4",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 12.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let selectedDate = encounter.getObservationValue(\"a6c6fce6-8bd4-4117-85c1-5d05efe923c4\")\n  const condition11 = new imports.rulesConfig.RuleCondition({encounter, formElement}).when.valueInEncounter(\"12003b39-078c-4f63-aa93-ecfb2e774557\").containsAnswerConceptName(\"d045b9b5-0d0f-4ead-82c4-7ff05bf4efa6\").matches();\n  \n  if (selectedDate) {\n    const currentDate = moment().startOf('day');\n    selectedDate = moment(selectedDate).startOf('day');\n    \n    if (selectedDate.isBefore(currentDate)) {\n      validationErrors.push(\"Invalid date: Past dates are not allowed\");\n    }\n  }\n\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : false
    } ],
    "voided" : true,
    "display" : "Details of Action Taken",
    "timed" : false
  } ],
  "decisionRule" : "\"use strict\";\n({params, imports}) => {\n    const encounter = params.entity;\n    const decisions = params.decisions;\n    const moment = imports.moment;\n    const encounterDecisions = [];\n    \n    const encounterDateForEditCase = encounter.getObservationValue(\"1f4bc226-9e3f-42c9-a332-2d81cd8e64f7\");\n    \n    if (!encounterDateForEditCase) {\n      let encDateTime = moment().format(\"YYYY-MM-DD HH:mm:ss\");\n      \n      if (encDateTime) {\n        encounterDecisions.push({ name: \"Encounter DateTime\", value: encDateTime });\n      }\n      decisions.encounterDecisions.push(...encounterDecisions);\n    }\n    \n    return decisions;\n};",
  "visitScheduleRule" : "",
  "validationRule" : "//SAMPLE RULE EXAMPLE\n'use strict';\n({params, imports}) => {\n  const encounter = params.entity;\n  const validationResults = [];\n  const moment = imports.moment;\n  \n  const encounterDateForEditCase = encounter.getObservationValue(\"1f4bc226-9e3f-42c9-a332-2d81cd8e64f7\");\n  const encounterDate = encounter.encounterDateTime;\n\n  if (!encounterDateForEditCase) {\n    if (encounterDate) {\n      const today = moment().startOf('day');\n      const encDate = moment(encounterDate).startOf('day');\n\n      if (!encDate.isSame(today, 'day')) {\n        validationResults.push(\n          imports.common.createValidationError(\"Encounter Date should be today's date.\")\n        );\n      }\n    }\n  } else {\n    const encDateEdit = moment(encounterDate).startOf('day');\n    const encDateOriginal = moment(encounterDateForEditCase).startOf('day');\n\n    if (!encDateEdit.isSame(encDateOriginal, 'day')) {\n      validationResults.push(\n        imports.common.createValidationError(\"Encounter Date cannot be changed.\")\n      );\n    }\n  }\n  return validationResults;\n};",
  "checklistsRule" : "",
  "decisionConcepts" : [ ]
}