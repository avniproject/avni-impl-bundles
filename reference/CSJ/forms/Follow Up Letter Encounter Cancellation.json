{
  "name" : "Follow Up Letter Encounter Cancellation",
  "uuid" : "0c209eec-21af-4b07-88e1-b1472e0fd850",
  "formType" : "ProgramEncounterCancellation",
  "formElementGroups" : [ {
    "uuid" : "7c52307d-6da7-42a1-b2d6-fe71f1a7cfd7",
    "name" : "Letter Details",
    "displayOrder" : 1.0,
    "formElements" : [ {
      "name" : "Date of Posting",
      "uuid" : "fc3bc3c2-af53-4173-9761-62e624d3271f",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "calendar"
      } ],
      "concept" : {
        "name" : "Date of Posting",
        "uuid" : "3541ec56-6082-47dd-8761-2abdfbe30399",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let selectedDate = programEncounter.getObservationValue('3541ec56-6082-47dd-8761-2abdfbe30399');\n\n    if(selectedDate) {\n      \n      const currentDate = moment().startOf('day');\n      selectedDate = moment(selectedDate.getValue()).startOf('day');\n      if(selectedDate.isAfter(currentDate)){\n          validationErrors.push(\"Invalid date: Future dates are not allowed\");\n      }\n    }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Applicant Name",
      "uuid" : "07bce77e-782b-42fc-8d88-1df0c6379f52",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Applicant Name",
        "uuid" : "2fb481ce-48a1-4be2-80a3-3f3b388b4980",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Subject matter of letter",
      "uuid" : "332b4e0c-f3c2-47b2-bbd6-f54ad1ed8dfe",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Subject Matter of Letter",
        "uuid" : "0e7ba322-974f-49f0-9969-325dd8d976b7",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Posted to (Name of Authority)",
      "uuid" : "b499fe0a-e1cd-41c7-b7c1-9fdba80430fc",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Posted to (Name of Authority)",
        "uuid" : "7e756501-1ec8-4b5c-a2a2-38862321c0c3",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Date of receipt by authority",
      "uuid" : "33abb953-a990-4ca0-b17f-7441076f56dc",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "calendar"
      } ],
      "concept" : {
        "name" : "Date of receipt by Authority",
        "uuid" : "135fa3f5-af03-43aa-8cc7-26bb42ff7ce0",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let dateOfPosting = programEncounter.getObservationValue('3541ec56-6082-47dd-8761-2abdfbe30399');\n  let receiptDate = programEncounter.getObservationValue('135fa3f5-af03-43aa-8cc7-26bb42ff7ce0');\n\n    if(dateOfPosting) {\n      dateOfPosting = moment(dateOfPosting.getValue()).startOf('day');\n      receiptDate = moment(receiptDate.getValue()).startOf('day');\n      if(dateOfPosting.isAfter(receiptDate)){\n          validationErrors.push(\"Invalid date: Date of receipt can't be more than Date of posting\");\n      }\n    }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "Date of response",
      "uuid" : "8df3e1d5-0f4e-437f-b109-63e56089aa5d",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "calendar"
      } ],
      "concept" : {
        "name" : "Date of response",
        "uuid" : "37c1036c-9cc8-4174-9e90-57043950fda3",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "rule" : "//SAMPLE RULE EXAMPLE\n'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  let dateOfPosting = programEncounter.getObservationValue('3541ec56-6082-47dd-8761-2abdfbe30399');\n  let receiptDate = programEncounter.getObservationValue('135fa3f5-af03-43aa-8cc7-26bb42ff7ce0');\n  let dateOfResponse = programEncounter.getObservationValue('37c1036c-9cc8-4174-9e90-57043950fda3');\n\n    if(dateOfPosting) {\n      dateOfPosting = moment(dateOfPosting.getValue()).startOf('day');\n      receiptDate = moment(receiptDate.getValue()).startOf('day');\n      dateOfResponse = moment(dateOfResponse.getValue()).startOf('day');\n      if(dateOfPosting.isAfter(dateOfResponse) || receiptDate.isAfter(dateOfResponse)){\n          validationErrors.push(\"Invalid date: Date of response can't be more than date of posting or date of receipt\");\n      }\n    }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "voided" : true,
      "mandatory" : false
    } ],
    "display" : "Letter Details",
    "timed" : false
  } ],
  "decisionRule" : "",
  "visitScheduleRule" : "",
  "validationRule" : "",
  "checklistsRule" : "",
  "decisionConcepts" : [ ]
}