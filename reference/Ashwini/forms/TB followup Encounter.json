{
  "name" : "TB followup Encounter",
  "uuid" : "6fc67d94-fd81-438c-8f92-4bc4e9ac45f8",
  "formType" : "ProgramEncounter",
  "formElementGroups" : [ {
    "uuid" : "202e4ffb-88d3-4e1e-be62-b28a9786e9da",
    "name" : "Identification",
    "displayOrder" : 1.0,
    "formElements" : [ {
      "name" : "Phase of treatment",
      "uuid" : "a12b0857-81b1-474e-aa61-255910737fc0",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Phase of treatment",
        "uuid" : "760ab500-e8c6-41af-91de-43b2a6c953e1",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Continuation phase",
          "uuid" : "23528265-b738-4d37-9fa3-424b0775467f",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Intensive phase",
          "uuid" : "ab11f5c6-57a2-4496-b76d-96f3da995670",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Category of medicine",
      "uuid" : "7bb36ebe-c01e-4d76-b1e9-a1ae0dfe8479",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Category of medicine",
        "uuid" : "cd2b1984-49f0-4423-9521-66dfdc2adad5",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "HRZ",
          "uuid" : "b5970617-a110-49f4-acc3-536a22289e4e",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "HRZES",
          "uuid" : "78adb3c3-b29e-439d-8e81-6f5e14f1d7e9",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "HRZE",
          "uuid" : "2d6a6190-ccb9-416f-82dd-09839769f3aa",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Weight of patient (kg)",
      "uuid" : "aaa89522-21c0-4e9e-aa6f-fd967a8ac171",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Weight of patient",
        "uuid" : "0a970d54-f2f3-4827-97ae-cca3956f4c5c",
        "dataType" : "Numeric",
        "answers" : [ ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Dosage of medicine",
      "uuid" : "120361e0-c9ba-47e5-aaa9-d6df8cb945e1",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Dosage of medicine",
        "uuid" : "279404cf-6a92-4300-a1c1-2a283c401dfe",
        "dataType" : "Numeric",
        "answers" : [ ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Treatment started on",
      "uuid" : "8f60413e-e72b-4320-af54-87e88f49fe59",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "Calendar"
      } ],
      "concept" : {
        "name" : "Treatment started on",
        "uuid" : "ee66e172-0971-4a06-80fa-3608b853e306",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new \n  imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  statusBuilder.show().when.latestValueInPreviousEncounters('Treatment started on').is.notDefined;\n  \nreturn statusBuilder.build();\n};",
      "mandatory" : true
    } ],
    "display" : "Identification",
    "timed" : false
  }, {
    "uuid" : "60f20b63-be12-4b45-98f7-507bd97a890c",
    "name" : "Checkup and Medication",
    "displayOrder" : 2.0,
    "formElements" : [ {
      "name" : "Sputum before treatment",
      "uuid" : "6f9b6b2a-6680-49f1-8ac9-fb41d23530f6",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Sputum before treatment",
        "uuid" : "0602a5c8-c50f-4dd7-9d36-034bd41d5cd6",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Sputum positive",
          "uuid" : "f9ccfd66-807a-4d2c-b846-376247122263",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Sputum negative",
          "uuid" : "82fd06be-5b0c-49b5-a7f5-8e285f8185c3",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Does the patient have a DOTS provider",
      "uuid" : "06afa0dc-de8b-48f8-bc83-0282b77c281d",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Does the patient have a DOTS provider",
        "uuid" : "4fa4a00c-94a4-4370-8843-8cf351fd52a4",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "No",
          "uuid" : "e7b50c78-3d90-484d-a224-9887887780dc",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Yes",
          "uuid" : "04bb1773-c353-44a1-a68c-9b448e07ff70",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Did the DOTS provider receive the medicine from the government this month",
      "uuid" : "78785d99-0734-4bee-a9da-4dd77b22ea33",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Did the DOTS provider receive the medicine from the government this month",
        "uuid" : "f363df03-eccb-4ae0-af08-ae8f591219e6",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "No",
          "uuid" : "e7b50c78-3d90-484d-a224-9887887780dc",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Yes",
          "uuid" : "04bb1773-c353-44a1-a68c-9b448e07ff70",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Did you take the medicine regularly in this month",
      "uuid" : "e832c1df-99bd-4857-970e-87da09cacb76",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Did you take the medicine regularly in this month",
        "uuid" : "a260a464-31df-480b-94bc-8f20952badeb",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "No",
          "uuid" : "e7b50c78-3d90-484d-a224-9887887780dc",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Yes",
          "uuid" : "04bb1773-c353-44a1-a68c-9b448e07ff70",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Did you miss the medication for more than 1 week",
      "uuid" : "fc041968-d617-4a3c-8c95-79611885b04c",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Did you miss the medication for more than 1 week",
        "uuid" : "cee68188-adc9-4b73-a3f4-08560da112da",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "04bb1773-c353-44a1-a68c-9b448e07ff70",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "e7b50c78-3d90-484d-a224-9887887780dc",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEnrolment = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEnrolment, formElement});\n  statusBuilder.show().when.valueInEnrolment('Did you take the medicine regularly in this month').containsAnswerConceptName(\"No\");\n  return statusBuilder.build();//this method returns FormElementStatus object with visibility true if the conditions given above matches\n};",
      "mandatory" : true
    }, {
      "name" : "How many days did you miss the medication",
      "uuid" : "463bbe9c-8d73-4081-b1b1-77cd1dc48122",
      "keyValues" : [ ],
      "concept" : {
        "name" : "How many days did you miss the medication",
        "uuid" : "1e39de86-566f-440a-ad4f-09418d93a69e",
        "dataType" : "Numeric",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEnrolment = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEnrolment, formElement});\n  statusBuilder.show().when.valueInEnrolment('Did you miss the medication for more than 1 week').containsAnswerConceptName(\"Yes\");\n  return statusBuilder.build();//this method returns FormElementStatus object with visibility true if the conditions given above matches\n};",
      "mandatory" : true
    }, {
      "name" : "What was the reason which caused irregularity in taking the medication",
      "uuid" : "ba2e87cd-5437-44c4-a20d-596670c7642a",
      "keyValues" : [ ],
      "concept" : {
        "name" : "What was the reason which caused irregularity in taking the medication",
        "uuid" : "68eed913-bf10-4ef9-8783-3a196af20c5f",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 7.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\nconst programEncounter = params.entity;\nconst formElement = params.formElement;\nconst statusBuilder = new\nimports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\nstatusBuilder.show().when.valueInEncounter('Did you take the medicine regularly in this month').containsAnswerConceptName('No');\nreturn statusBuilder.build();\n};",
      "mandatory" : true
    }, {
      "name" : "Did you have any side effects",
      "uuid" : "26a3be29-7101-415f-a9aa-a12379501f05",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Did you have any side effects",
        "uuid" : "42fa0891-bf86-464b-aea3-1a638d0a4ccb",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Blurring of vision",
          "uuid" : "cfc188da-fd40-41f0-a4a6-eaa7609ca279",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Jaundice",
          "uuid" : "352bb8a4-1569-492f-9a53-14e3b134c104",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Others",
          "uuid" : "118fa43e-525f-41d6-ad3f-98a4857e2d3e",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Gastritis",
          "uuid" : "08d501d7-6956-474a-ab69-f0ee8c339f31",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Joint pain",
          "uuid" : "cc861ee1-9815-4ad2-9762-332ed686f39d",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 8.0,
      "type" : "MultiSelect",
      "rule" : "'use strict';\n({params, imports}) => {\nconst programEncounter = params.entity;\nconst formElement = params.formElement;\nconst statusBuilder = new\nimports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\nstatusBuilder.show().when.valueInEncounter('Did you take the medicine regularly in this month').containsAnswerConceptName('Yes');\nreturn statusBuilder.build();\n};",
      "mandatory" : true
    }, {
      "name" : "Was the treatment successfully completed",
      "uuid" : "709bd484-89b9-49de-830a-86f2182573d2",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Was the treatment successfully completed",
        "uuid" : "1b5c814e-0e8d-421d-bb26-46aa431c9dac",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "No",
          "uuid" : "e7b50c78-3d90-484d-a224-9887887780dc",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Yes",
          "uuid" : "04bb1773-c353-44a1-a68c-9b448e07ff70",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 9.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "Treatment completed on",
      "uuid" : "2b7f95c1-c7d8-4f68-bb65-1a6171f2bf77",
      "keyValues" : [ {
        "key" : "datePickerMode",
        "value" : "Calendar"
      } ],
      "concept" : {
        "name" : "Treatment completed on",
        "uuid" : "66a0c07e-ace7-4136-b0ff-b0437d11dc15",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 10.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\nconst programEncounter = params.entity;\nconst formElement = params.formElement;\nconst statusBuilder = new\nimports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\nstatusBuilder.show().when.valueInEncounter('Was the treatment successfully completed').containsAnswerConceptName('Yes');\nreturn statusBuilder.build();\n};",
      "mandatory" : true
    }, {
      "name" : "Sputum after treatment",
      "uuid" : "fa323ec2-53e6-4547-bfc7-d7fd20c42764",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Sputum after treatment",
        "uuid" : "c0a3cd03-14f7-4ac6-8712-cf9a0481132b",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Sputum negative",
          "uuid" : "82fd06be-5b0c-49b5-a7f5-8e285f8185c3",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Sputum positive",
          "uuid" : "f9ccfd66-807a-4d2c-b846-376247122263",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "keyValues" : [ ],
        "media" : [ ]
      },
      "displayOrder" : 11.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\nconst programEncounter = params.entity;\nconst formElement = params.formElement;\nconst statusBuilder = new\nimports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\nstatusBuilder.show().when.valueInEncounter('Was the treatment successfully completed').containsAnswerConceptName('Yes');\nreturn statusBuilder.build();\n};",
      "mandatory" : true
    }, {
      "name" : "Remarks for the month",
      "uuid" : "14d857b5-5081-4cd1-a2a9-d577757dab16",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Remarks for the month",
        "uuid" : "26aab8dc-4106-4d4f-b94d-b9416fb877e8",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 12.0,
      "type" : "SingleSelect",
      "mandatory" : false
    } ],
    "display" : "Checkup and Medication",
    "timed" : false
  } ],
  "decisionRule" : "",
  "visitScheduleRule" : "//SAMPLE RULE EXAMPLE\n\"use strict\";\n({ params, imports }) => {\n  const programEncounter = params.entity;\n  const scheduleBuilder = new imports.rulesConfig.VisitScheduleBuilder({\n    programEncounter\n  });\n  //add new visit schedule object to scheduleBuilder\n  let visitDate = imports.moment(programEncounter.encounterDateTime).add(30, 'days').toDate();\n  let sputumAfterTreatment = programEncounter.getObservationReadableValue('Sputum after treatment');\n  \n  \n  scheduleBuilder\n    .add({\n      name: \"TB followup\",\n      encounterType: \"TB followup\",\n      earliestDate: visitDate,\n      maxDate: imports.moment(visitDate).add(20, 'days').toDate()\n    }).whenItem(sputumAfterTreatment == 'Sputum positive')\n    .is.truthy;\n    \n  return scheduleBuilder.getAll();\n};",
  "validationRule" : "",
  "checklistsRule" : "",
  "decisionConcepts" : [ ]
}