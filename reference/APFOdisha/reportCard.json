[ {
  "uuid" : "f1cd0afd-17b6-4def-8042-e13a73f51b80",
  "id" : 816,
  "name" : "Total households registered",
  "query" : "'use strict';\n({params, imports}) => {\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n    \n    let lst = params.db.objects('Individual')\n            .filtered(`voided = false AND subjectType.name = 'Household'`)\n            .filtered(`${query}`);\n\n     return lst;\n};",
  "description" : "",
  "color" : "#319da0",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "9a3dcdd7-0b25-45fc-9f72-e83dd4208c65",
  "id" : 2742,
  "name" : "Child with age more than 5 years",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    date.setFullYear(date.getFullYear() - 5);\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n    \n    return  params.db.objects('Individual')\n        .filtered(`SUBQUERY(enrolments, $enrolment, $enrolment.programExitDateTime = null and $enrolment.program.name = 'Child' and $enrolment.voided = false).@count > 0 AND dateOfBirth <= $0`,date)\n        .filtered(`${query}`)\n};",
  "description" : "",
  "color" : "#6c62e2",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "ab44995a-b918-4cb5-9105-a99e921635ff",
  "id" : 1383,
  "name" : "Due visits for PNC",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    \n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n        \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'PNC') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)        \n        .map(enc => enc.programEnrolment.individual)\n\n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "ba8c9508-6b02-4da9-b5ce-a1ef8ab8726a",
  "id" : 820,
  "name" : "Total enrolments in pregnancy program",
  "query" : "'use strict';\n({params, imports}) => {\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\nlet query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n\n    }\n    \n    \n    let lst = params.db.objects('Individual')\n            .filtered(`voided = false AND subjectType.name = 'Individual' AND\n            SUBQUERY(enrolments, $enrolment, $enrolment.programExitDateTime = null and $enrolment.program.name = 'Pregnancy' and $enrolment.voided = false).@count > 0\n            `).filtered(`${query}`)\n           ;\n           \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n    \n     return lst;\n};",
  "description" : "",
  "color" : "#2196f3",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "7bcb72d8-2db3-4a7f-8868-a86f5baa95d7",
  "id" : 818,
  "name" : "Due visits",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "27020b32-c21b-43a4-81bd-7b88ad3a6ef0",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "44c2bd2b-a9fe-4d63-87a0-28bec890fe3d",
  "id" : 4060,
  "name" : "Child Home Visit Due",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'Child Home Visit') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "226cf1da-3fb2-4ff7-a412-23a7b8738481",
  "id" : 4061,
  "name" : "Child Home Visit Overdue",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    \n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'Child Home Visit') and  maxVisitDateTime <= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "d1cff8a6-df41-40f0-aeb7-1a6ada34ac97",
  "id" : 1387,
  "name" : "Overdue for PW Home Visit",
  "query" : "\n'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'PW Home Visit') and  maxVisitDateTime <= $0 and cancelDateTime == null`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n        \n  lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n  \n  return lst\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "3ff7e06c-7495-4be3-94a3-09a7ceb8b02c",
  "id" : 4062,
  "name" : "MAM Child Supervisor Child Home Visit Scheduled",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Child' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime = null \n        AND encounterType.name = 'Supervisor Child Home visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0\n        AND maxVisitDateTime >= $0\n        AND SUBQUERY(programEnrolment.individual.observations, $observation, \n            $observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' \n            AND $observation.valueJSON CONTAINS 'MAM'\n        ).@count > 0`,date)\n    .filtered(`${query}`)\n    .map(enc => enc.programEnrolment.individual);    \n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "e75daae6-a13e-4831-8bc7-599c4693b6d8",
  "id" : 4064,
  "name" : "Supervisor Growth Monitoring Session Scheduled",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "27020b32-c21b-43a4-81bd-7b88ad3a6ef0",
  "standardReportCardInputSubjectTypes" : [ "eb642a9c-ae1b-4247-81ba-87800227d981" ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ "3cb520a0-6ac1-44b4-89cd-a2c3158a606c" ],
  "voided" : false
}, {
  "uuid" : "cb2cf9c5-ffa7-4a7b-8fbb-52bb9aafd6ae",
  "id" : 4063,
  "name" : "Supervisor VHSND Visits Scheduled",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "27020b32-c21b-43a4-81bd-7b88ad3a6ef0",
  "standardReportCardInputSubjectTypes" : [ "eb642a9c-ae1b-4247-81ba-87800227d981" ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ "ce028f08-b09a-43d5-8924-2313700a841b" ],
  "voided" : false
}, {
  "uuid" : "9a8f01aa-e918-414c-81d1-9fd2a448b4f2",
  "id" : 4065,
  "name" : "NRC Discharge",
  "query" : "'use strict';\n({params, imports}) => {\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n            console.log(addressValue, addressValue)\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }; \n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND encounterType.name = 'NRC Discharge' and cancelDateTime == null`)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n\n    return lst;\n};",
  "description" : "Shows the count of total number of beneficiaries for whom the NRC discharge form is scheduled.\nThe card should count only those beneficiaries who have previously filled the NRC admission form and are eligible for discharge.",
  "color" : "#278053",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "9decb6e5-198e-4cee-9229-93aaaea1840d",
  "id" : 4066,
  "name" : "ANC visits completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    \n    \n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n  }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime != null and earliestVisitDateTime <> null AND (encounterType.name = 'ANC') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)        \n        .map(enc => enc.programEnrolment.individual)\n  \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n\n    return lst;\n};",
  "description" : "",
  "color" : "#1a611f",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "68cd72f9-576c-4d67-b28e-4f382e25bead",
  "id" : 4067,
  "name" : "GF2 Child Supervisor Child Home Visit Scheduled",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Child' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime = null \n        AND encounterType.name = 'Supervisor Child Home visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0\n        AND maxVisitDateTime >= $0 \n        AND SUBQUERY(programEnrolment.individual.observations, $observation, \n            $observation.concept.uuid = 'a9d8db9a-8411-412c-82ed-e6e177353561' \n            AND $observation.valueJSON CONTAINS 'GF2'\n        ).@count > 0`,date)\n    .filtered(`${query}`)\n    .map(enc => enc.programEnrolment.individual);    \n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "87f959f7-7afa-4b69-a887-de7026162c36",
  "id" : 824,
  "name" : "High-Risk Pregnancy - To be monitored by QRT",
  "query" : "'use strict';\n({params, imports}) => {\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let list = params.db.objects('Individual')\n        .filtered(`voided==false and SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Pregnancy' and $enrolment.programExitDateTime = null and $enrolment.voided = false and SUBQUERY( $enrolment.observations, $observation, $observation.concept.uuid = 'be0ab05f-b0f3-43ec-b598-fdde0679104a' and $observation.valueJSON CONTAINS '8ebbf088-f292-483e-9084-7de919ce67b7').@count > 0).@count > 0 `)\n        .filtered(`${query}`)\n\n    return list;\n};",
  "description" : "",
  "color" : "#E65100",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "9848cb18-e5ef-4e11-a0b1-368251d6b72d",
  "id" : 4068,
  "name" : "GF2 Child Supervisor Child Home Visit Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Child' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime != null \n        AND encounterType.name = 'Supervisor Child Home visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0\n        AND maxVisitDateTime >= $0 \n        AND SUBQUERY(programEnrolment.individual.observations, $observation, \n            $observation.concept.uuid = 'a9d8db9a-8411-412c-82ed-e6e177353561' \n            AND $observation.valueJSON CONTAINS 'GF2'\n        ).@count > 0`,date)\n    .filtered(`${query}`)\n    .map(enc => enc.programEnrolment.individual);    \n};",
  "description" : "",
  "color" : "#1a611f",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "10fa2694-0ce0-4990-8f9c-a07e056a925c",
  "id" : 4069,
  "name" : "SAM Child Supervisor Child Home Visit Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Child' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime != null \n        AND encounterType.name = 'Supervisor Child Home visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0 \n        AND maxVisitDateTime >= $0\n        AND SUBQUERY(programEnrolment.individual.observations, $observation, \n            $observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' \n            AND $observation.valueJSON CONTAINS 'SAM'\n        ).@count > 0`,date)\n    .filtered(`${query}`)\n    .map(enc => enc.programEnrolment.individual);    \n};",
  "description" : "",
  "color" : "#1a611f",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "6cb847b2-db53-4a2a-99b3-522f015849eb",
  "id" : 3103,
  "name" : "Scheduled visits for NRC (Admitted)",
  "query" : "'use strict';\n({params, imports}) => {\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n            console.log(addressValue, addressValue)\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }; \n\n    var date = new Date();\n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'NRC Admission') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n\n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "6063053a-f450-4ae7-9fdd-7d5f5d026ecf",
  "id" : 4070,
  "name" : "HRP Supervisor PW Home Visit Scheduled",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    let date = new Date();\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Pregnancy' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime = null \n        AND encounterType.name = 'Supervisor PW Home Visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0\n        AND maxVisitDateTime >= $0\n        AND SUBQUERY(programEnrolment.observations,$obs,\n            (\n                $obs.concept.uuid = '3e21a6f4-6727-44b3-9b7e-148ce9ad77fd' \n                AND $obs.valueJSON CONTAINS '8ebbf088-f292-483e-9084-7de919ce67b7'\n            ) \n            OR \n            (\n                $obs.concept.uuid ='959cc421-380b-409b-8007-270c35d1e543' \n                AND $obs.valueJSON CONTAINS '8ebbf088-f292-483e-9084-7de919ce67b7'\n            )\n        ).@count > 0\n        `, date)\n        .filtered(`${query}`)\n        .map((enc)=> enc.programEnrolment.individual)\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "369a03f4-55df-49f9-9d81-7eb75905187c",
  "id" : 4072,
  "name" : "Supervisor Growth Monitoring Session Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    let date = new Date();\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Encounter')\n        .filtered(`individual.voided = false\n            AND encounterDateTime != null\n            AND (encounterType.name = 'Supervisor Growth Monitoring Session') and cancelDateTime == null and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.individual)\n};\n",
  "description" : "",
  "color" : "#2c631c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "3cbcbdb7-70b4-4f60-b0c4-8abe30e173ba",
  "id" : 4073,
  "name" : "SAM Child Supervisor Child Home Visit Scheduled",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Child' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime = null \n        AND encounterType.name = 'Supervisor Child Home visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0 \n        AND maxVisitDateTime >= $0\n        AND SUBQUERY(programEnrolment.individual.observations, $observation, \n            $observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' \n            AND $observation.valueJSON CONTAINS 'SAM'\n        ).@count > 0`,date)\n    .filtered(`${query}`)\n    .map(enc => enc.programEnrolment.individual);    \n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "da071f2e-3ede-4630-a2ed-527861688ef2",
  "id" : 4074,
  "name" : "HRP Supervisor PW Home Visit Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    let date = new Date();\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Pregnancy' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime != null \n        AND encounterType.name = 'Supervisor PW Home Visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0\n        AND maxVisitDateTime >= $0\n        AND SUBQUERY(programEnrolment.observations,$obs,\n            (\n                $obs.concept.uuid = '3e21a6f4-6727-44b3-9b7e-148ce9ad77fd' \n                AND $obs.valueJSON CONTAINS '8ebbf088-f292-483e-9084-7de919ce67b7'\n            ) \n            OR \n            (\n                $obs.concept.uuid ='959cc421-380b-409b-8007-270c35d1e543' \n                AND $obs.valueJSON CONTAINS '8ebbf088-f292-483e-9084-7de919ce67b7'\n            )\n        ).@count > 0\n        `, date)\n        .filtered(`${query}`)\n        .map((enc)=> enc.programEnrolment.individual)\n};",
  "description" : "",
  "color" : "#1a611f",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "5a802700-fa27-4026-925a-bf788e4f89a7",
  "id" : 4075,
  "name" : "PW in third-trimester Supervisor PW Home Visit Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Individual')\n    .filtered(\n        `voided = false \n        and enrolments.programExitDateTime = null \n        and enrolments.voided = false \n        and enrolments.program.name = 'Pregnancy'`)\n    .filtered(`SUBQUERY(enrolments.encounters, $encounter, \n        ($encounter.encounterType.name = 'Delivery' and encounterDateTime = null)).@count>0`)\n    .filtered(`SUBQUERY(enrolments.encounters, $encounter, \n        ($encounter.encounterType.name = 'Supervisor PW Home Visit' and encounterDateTime != null)\n        and earliestVisitDateTime <= $0 \n        and maxVisitDateTime >= $0).@count > 0`,date)\n    .filtered(`${query}`)\n    .filter((individual) =>individual.voided === false && _.some(individual.enrolments, enrolment => {\n    let eddDate  = imports.moment(enrolment.getObservationValue('a4b30cac-9a00-4b76-b6ba-1f752a6b3dd6')).toDate();\n    let eddDifference = imports.moment(eddDate).diff(imports.moment(), 'days');\n    return enrolment.program.name === 'Pregnancy' && eddDifference <= 30 && eddDifference >= 0;\n}));\n};",
  "description" : "",
  "color" : "#1f6004",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "457b1c0b-a034-4177-a4ec-1092d90f7b05",
  "id" : 4076,
  "name" : "PW in third-trimester Supervisor PW Home Visit Scheduled",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Individual')\n    .filtered(\n        `voided = false \n        and enrolments.programExitDateTime = null \n        and enrolments.voided = false \n        and enrolments.program.name = 'Pregnancy'`)\n    .filtered(`SUBQUERY(enrolments.encounters, $encounter, \n        ($encounter.encounterType.name = 'Delivery' and encounterDateTime = null)).@count>0`)\n    .filtered(`SUBQUERY(enrolments.encounters, $encounter, \n        ($encounter.encounterType.name = 'Supervisor PW Home Visit' and encounterDateTime = null)\n        and cancelDateTime == null\n        and earliestVisitDateTime <= $0 \n        and maxVisitDateTime >= $0).@count > 0`,date)\n    .filtered(`${query}`)\n    .filter((individual) =>individual.voided === false && _.some(individual.enrolments, enrolment => {\n    let eddDate  = imports.moment(enrolment.getObservationValue('a4b30cac-9a00-4b76-b6ba-1f752a6b3dd6')).toDate();\n    let eddDifference = imports.moment(eddDate).diff(imports.moment(), 'days');\n    return enrolment.program.name === 'Pregnancy' && eddDifference <= 30 && eddDifference >= 0;\n}));\n}\n",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "54df2bc0-bf07-4fcf-8eb4-f640dd2cd07b",
  "id" : 4077,
  "name" : "MAM Child Supervisor Child Home Visit Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter')\n    .filtered(`\n        voided = false \n        AND programEnrolment.individual.voided = false \n        AND programEnrolment.voided = false \n        AND programEnrolment.program.name = 'Child' \n        AND programEnrolment.programExitDateTime = null \n        AND encounterDateTime != null \n        AND encounterType.name = 'Supervisor Child Home visit' \n        AND cancelDateTime = null\n        AND earliestVisitDateTime <= $0\n        AND maxVisitDateTime >= $0\n        AND SUBQUERY(programEnrolment.individual.observations, $observation, \n            $observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' \n            AND $observation.valueJSON CONTAINS 'MAM'\n        ).@count > 0`,date)\n    .filtered(`${query}`)\n    .map(enc => enc.programEnrolment.individual);    \n};",
  "description" : "",
  "color" : "#1a611f",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "13156709-f8ee-4906-b8da-392d51aac410",
  "id" : 1744,
  "name" : "To Be Exited Mother",
  "query" : "'use strict';\n({params, imports}) => {\n    const isDelivered = (enrolment) => {\n        const encounter = enrolment.lastFulfilledEncounter('Delivery');\n        if (encounter === undefined){\n          return false\n        };\n        const obs = encounter.getObservationReadableValue('f72ec1db-50d5-409e-883a-421825fbebb5');\n        let currentDate = new Date();\n        let sixMonthsPrior = new Date(currentDate);\n        sixMonthsPrior.setMonth(sixMonthsPrior.getMonth() - 6);\n        return obs < sixMonthsPrior;\n    };\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    };  \n\n    return params.db.objects('Individual')\n    .filtered(`voided = false and SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Pregnancy' and $enrolment.programExitDateTime = null and $enrolment.voided = false and SUBQUERY($enrolment.encounters, $encounter, $encounter.encounterType.name = 'Delivery' and $encounter.voided = false and SUBQUERY($encounter.observations, $observation, $observation.concept.uuid = 'f72ec1db-50d5-409e-883a-421825fbebb5').@count > 0).@count > 0).@count > 0`)\n    .filtered(`${query}`)\n    .filter((individual) => individual.enrolments.some(enrolment => enrolment.programExitDateTime == null &&  isDelivered(enrolment)));\n};",
  "description" : "Women who gave birth earlier than six months ago and have have not yet exited from the program",
  "color" : "#c868d0",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "36144580-032c-4b33-833c-5c8622b39728",
  "id" : 1393,
  "name" : "Due visits for Growth Monitoring",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n        let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n   \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'Growth Monitoring') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n    \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n    \n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "548de09a-cb25-47d8-8b73-87a3d7457a13",
  "id" : 4078,
  "name" : "Backlog Visits for NRC (Admitted)",
  "query" : "'use strict';\n({params, imports}) => {\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n            console.log(addressValue, addressValue)\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }; \n\n    var date = new Date();\n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'NRC Admission') and  maxVisitDateTime <= $0 and cancelDateTime == null`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n\n    return lst;\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "b8f5c4e7-da6b-439e-b63a-8f2d21aa39e3",
  "id" : 1390,
  "name" : "Overdue for QRT SAM child",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    \n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'QRT Child') and  maxVisitDateTime <= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n        \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n  \n    return lst;\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "709cb6b2-4012-46b3-9f29-6a586f7b2d80",
  "id" : 1389,
  "name" : "Overdue for QRT PW",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n      let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'QRT PW') and  maxVisitDateTime <= $0 and cancelDateTime == null`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n        \n  lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n  \n  return lst;\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "99771a35-495b-4fa4-bbdc-badef22febd9",
  "id" : 815,
  "name" : "Total Village Profiles Registered",
  "query" : "'use strict';\n({params, imports}) => {\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n\n    let lst = params.db.objects('Individual')\n            .filtered(`voided = false AND subjectType.name = 'Village Profile'`)\n            .filtered(`${query}`);\n\n     return lst;\n};",
  "description" : "",
  "color" : "#38c790",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "e827e968-1cdb-4f45-aa0b-23367a1b8f0a",
  "id" : 823,
  "name" : "SAM children",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Individual')\n        .filtered(`voided = false AND enrolments.voided = false AND enrolments.program.name = 'Child' AND enrolments.programExitDateTime = null `)\n        .filtered(\"SUBQUERY(observations, $observation, ($observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' and ($observation.valueJSON  CONTAINS 'SAM'))OR ($observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' and ($observation.valueJSON  CONTAINS 'Severely Underweight'))).@count > 0\")\n        .filtered(`${query}`)\n        .filter((individual) => individual.getAgeInYears() <= 5)\n};",
  "description" : "",
  "color" : "#E65100",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "7dbfed4b-5a1a-448a-a5e3-4af983d1ddde",
  "id" : 2745,
  "name" : "High Risk Pregnancy",
  "query" : "'use strict';\n({params, imports}) => {\n    const GEO_HIGH_RISK_UUID = '96b167e1-2d98-40b9-af04-8e4f64f9999a';\n    const CLINICALLY_HIGH_RISK_UUID = '959cc421-380b-409b-8007-270c35d1e543';\n    const HIGH_RISK_CONDITION_NAME = 'High risk condition'; // Added condition check\n    const YES_UUID = '8ebbf088-f292-483e-9084-7de919ce67b7';\n\n    let addressValue = null;\n\n    // \uD83D\uDD0D Handle address-level filtering (Village/Hamlets)\n    if (params.ruleInput) {\n        const addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue\n                .filter(add => add.type === \"Village/Hamlet\")\n                .map(add => add.uuid);\n        }\n    }\n\n    // Default query filter\n    let query = 'voided = false';\n\n    // \uD83D\uDCCD If address is given, add it to query\n    if (addressValue != null) {\n        const output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    // \uD83E\uDDE0 Updated HRP logic:\n    // Include:\n    //  1. Geographically high-risk pregnancies\n    //  2. Clinically high-risk pregnancies\n    //  3. Enrolments with any \"High risk condition\" identified during enrolment\n    return params.db.objects('Individual')\n        .filtered(`\n            voided = false AND SUBQUERY(enrolments, $enrolment,\n                $enrolment.program.name = 'Pregnancy' AND\n                $enrolment.programExitDateTime = null AND\n                $enrolment.voided = false AND\n                SUBQUERY($enrolment.observations, $obs,\n                    (\n                        ($obs.concept.uuid = '${GEO_HIGH_RISK_UUID}' AND $obs.valueJSON CONTAINS '${YES_UUID}')\n                        OR\n                        ($obs.concept.uuid = '${CLINICALLY_HIGH_RISK_UUID}' AND $obs.valueJSON CONTAINS '${YES_UUID}')\n                        OR\n                        ($obs.concept.name = '${HIGH_RISK_CONDITION_NAME}' AND $obs.valueJSON != '[]')\n                    )\n                ).@count > 0\n                AND SUBQUERY($enrolment.encounters, $enc,\n                    $enc.encounterType.name = 'Delivery' AND\n                    $enc.voided = false AND\n                    $enc.encounterDateTime != null AND\n                    $enc.cancelDateTime = null\n                ).@count = 0\n            ).@count > 0\n        `)\n        .filtered(query);\n};\n",
  "description" : "",
  "color" : "#E65100",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "abade9ab-fbe4-47e9-9bfd-a7f0bfce70cb",
  "id" : 1742,
  "name" : "Child Exit due",
  "query" : "'use strict';\n({params, imports}) => {\n    var date = new Date();\n    let addressValue = null;\n    date.setFullYear(date.getFullYear() - 5);\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    };  \n    \n    return params.db.objects('Individual')\n        .filtered(`voided = false and SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Child' and $enrolment.programExitDateTime = null and $enrolment.voided = false).@count > 0 and dateOfBirth <= $0`,date)\n        .filtered(`${query}`)\n};",
  "description" : "Children over 5 years of age who  have not yet exited from the program",
  "color" : "#6c62e2",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "0244a027-e9ac-4dff-87c8-4298c3168804",
  "id" : 819,
  "name" : "Overdue visits standard",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "9f88bee5-2ab9-4ac4-ae19-d07e9715bdb5",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "4fbba91c-cab8-418e-a9d9-df79f224cdcb",
  "id" : 1385,
  "name" : "Overdue for QRT child followup",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n\n'use strict';\n({params, imports}) => {\nconst _ = imports.lodash;\nconst moment = imports.moment;\n\nconst qrtChildFollowUpOverdue = (enrolment) => {\n    const qrtChildFollowUpEnc = enrolment.scheduledEncountersOfType('QRT Child Followup');\n    \n    const qrtChildFollowUp = qrtChildFollowUpEnc\n    .filter((e) => moment().isSameOrAfter(moment(e.maxVisitDateTime)) &&\n    e.cancelDateTime === null && e.encounterDateTime === null );\n    \n    return qrtChildFollowUp.length > 0 ? true : false;\n    \n    };\n\n    return params.db.objects('Individual')\n        .filtered(`SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Child' and $enrolment.programExitDateTime = null and $enrolment.voided = false and SUBQUERY($enrolment.encounters, $encounter, $encounter.encounterType.name = 'QRT Child Followup' and $encounter.voided = false ).@count > 0 and voided = false).@count > 0`)\n        .filter((individual) => individual.voided === false  && _.some(individual.enrolments, enrolment => qrtChildFollowUpOverdue(enrolment)\n        ))\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "7a199bca-66b5-4ca7-a006-25e7c16eb448",
  "id" : 1382,
  "name" : "Due visits for ANC",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    \n    \n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'ANC') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)        \n        .map(enc => enc.programEnrolment.individual)\n  \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n\n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "6085c2f4-52e7-4b08-85b6-d6b2612b4cf5",
  "id" : 5996,
  "name" : "Scheduled visits",
  "color" : "#388e3c",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "27020b32-c21b-43a4-81bd-7b88ad3a6ef0",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "85ce7239-e8b5-4e57-b07d-66c18cee47b2",
  "id" : 5997,
  "name" : "Overdue visits",
  "color" : "#d32f2f",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "9f88bee5-2ab9-4ac4-ae19-d07e9715bdb5",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "a1673f8a-c394-4bcf-8b6f-63d83a5443e2",
  "id" : 5998,
  "name" : "Total",
  "color" : "#ffffff",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "1fbcadf3-bf1a-439e-9e13-24adddfbf6c0",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "f366f35a-5c4f-4ff7-b510-2dc9f5f88847",
  "id" : 5999,
  "name" : "Recent registrations",
  "color" : "#ffffff",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "88a7514c-48c0-4d5d-a421-d074e43bb36c",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "standardReportCardInputRecentDuration" : "{\"value\":\"1\",\"unit\":\"days\"}",
  "voided" : false
}, {
  "uuid" : "e1036b69-df46-4351-9916-10cd4cfcb6bd",
  "id" : 6000,
  "name" : "Recent enrolments",
  "color" : "#ffffff",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "a5efc04c-317a-4823-a203-e62603454a65",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "standardReportCardInputRecentDuration" : "{\"value\":\"1\",\"unit\":\"days\"}",
  "voided" : false
}, {
  "uuid" : "dd961ee1-9d4e-4ec9-99f0-99b36672be7c",
  "id" : 6001,
  "name" : "Recent visits",
  "color" : "#ffffff",
  "nested" : false,
  "count" : 1,
  "standardReportCardType" : "77b5b3fa-de35-4f24-996b-2842492ea6e0",
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "standardReportCardInputRecentDuration" : "{\"value\":\"1\",\"unit\":\"days\"}",
  "voided" : false
}, {
  "uuid" : "558edb6e-23cb-458a-9fe3-e71f5d33cea5",
  "id" : 4071,
  "name" : "Supervisor VHSND Visits Completed",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    let date = new Date();\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Encounter')\n        .filtered(`individual.voided = false\n            AND encounterDateTime != null\n            AND (encounterType.name = 'Supervisor VHSND Visit') and cancelDateTime == null and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.individual)\n};",
  "description" : "",
  "color" : "#1a611f",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "5f45e0bc-c21e-465d-a62c-7c55c48f4626",
  "id" : 1391,
  "name" : "Overdue for NRC (voided~2913)",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n\n'use strict';\n({params, imports}) => {\nconst _ = imports.lodash;\nconst moment = imports.moment;\n\nconst nrcOverdue = (enrolment) => {\n    const nrcEnc = enrolment.scheduledEncountersOfType('NRC');\n    \n    const nrc = nrcEnc\n    .filter((e) => moment().isSameOrAfter(moment(e.maxVisitDateTime)) &&\n    e.cancelDateTime === null && e.encounterDateTime === null );\n    \n    return nrc.length > 0 ? true : false;\n    \n    };\n\n    return params.db.objects('Individual')\n        .filtered(`SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Child' and $enrolment.programExitDateTime = null and $enrolment.voided = false and SUBQUERY($enrolment.encounters, $encounter, $encounter.encounterType.name = 'NRC' and $encounter.voided = false ).@count > 0 and voided = false).@count > 0`)\n        .filter((individual) => individual.voided === false  && _.some(individual.enrolments, enrolment => nrcOverdue(enrolment)\n        ))\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : true
}, {
  "uuid" : "3235075b-65aa-4727-a2d0-e48c847a359a",
  "id" : 2739,
  "name" : "Growth Faltering-1",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n   \n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Individual')\n        .filtered(`voided = false AND enrolments.voided = false AND enrolments.program.name = 'Child' AND enrolments.programExitDateTime = null AND voided = false `)\n        .filtered(`SUBQUERY(observations, $observation, $observation.concept.uuid = 'a9d8db9a-8411-412c-82ed-e6e177353561' and $observation.valueJSON CONTAINS 'GF1').@count > 0`)\n        .filtered(`${query}`)\n        .filter((individual) => individual.getAgeInYears() <= 5)\n};",
  "description" : "",
  "color" : "#dfa75c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "a9d5b70b-3d46-40a7-85ff-2b39477e85c1",
  "id" : 817,
  "name" : "Total AWC Profiles Registered",
  "query" : "'use strict';\n({params, imports}) => {\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"AWC\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n\n    let lst = params.db.objects('Individual')\n            .filtered(`voided = false AND subjectType.name = 'AWC Profile'`)\n            .filtered(`${query}`);\n\n     return lst;\n};",
  "description" : "",
  "color" : "#688297",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "9367ae53-d3cb-499e-847e-dfc9f23fff1e",
  "id" : 1384,
  "name" : "Overdue visits for Growth Monitoring",
  "query" : "\n'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    };  \n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'Growth Monitoring') and  maxVisitDateTime <= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n        \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n\n    return lst;\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "1485a4d4-a1ad-47d5-b2d8-ced2ec5b2837",
  "id" : 1381,
  "name" : "Overdue visits for delviery",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n\n    return params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'Delivery') and  maxVisitDateTime <= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "b3f19a1a-2b78-454d-9af3-c0d9c19ce265",
  "id" : 2740,
  "name" : "Lactating Mother ",
  "query" : "\n'use strict';\n({params, imports}) => {\n    const moment = imports.moment;\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('ProgramEncounter').filtered(`\n      voided = false AND\n      encounterDateTime != null AND\n      encounterType.name = 'Delivery' AND\n      programEnrolment.programExitDateTime = null AND\n      programEnrolment.individual.voided = false AND\n      SUBQUERY(observations, $observation,\n          $observation.concept.uuid = '976db865-27a4-41e7-be18-6b59f42bb900' AND\n          $observation.valueJSON CONTAINS '1ece5dd3-864e-460a-9116-874b94ce22eb'\n      ).@count > 0  `)\n        .filtered('TRUEPREDICATE sort(programEnrolment.individual.uuid asc , encounterDateTime desc) Distinct(programEnrolment.individual.uuid)')\n        .filtered(`${query}`)\n        .filter(enc => {\n            const deliveryDate = moment(enc.getObservationReadableValue(\"Date of delivery\")).add(6, 'M');\n            return moment(deliveryDate).isSameOrAfter(moment());\n        })\n        .map(enc => enc.programEnrolment.individual);\n};",
  "description" : "",
  "color" : "#8b6e43",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "711aad72-f8d7-4a6b-a777-5b83c55e0bb7",
  "id" : 821,
  "name" : "Total individuals registered",
  "query" : "'use strict';\n({params, imports}) => {\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n\n    let lst = params.db.objects('Individual')\n            .filtered(`voided = false AND subjectType.name = 'Individual'`)\n            .filtered(`${query}`);\n\n     return lst;\n};",
  "description" : "",
  "color" : "#5a8f7b",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "7f25acfc-437b-42c8-901f-ceb170364eda",
  "id" : 1386,
  "name" : "Due visits for QRT child followup",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n\n'use strict';\n({params, imports}) => {\nconst _ = imports.lodash;\nconst moment = imports.moment;\n\nconst qrtChildFollowUpDue = (enrolment) => {\n    const qrtChildFollowUpEnc = enrolment.scheduledEncountersOfType('QRT Child Followup');\n    \n    const qrtChildFollowUp = qrtChildFollowUpEnc\n    .filter((e) => moment().isSameOrAfter(moment(e.earliestVisitDateTime)) && moment().isSameOrBefore(moment(e.maxVisitDateTime)) && e.cancelDateTime === null && e.encounterDateTime === null );\n    \n    return qrtChildFollowUp.length > 0 ? true : false;\n    \n    };\n\n    return params.db.objects('Individual')\n        .filtered(`SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Child' and $enrolment.programExitDateTime = null and $enrolment.voided = false and SUBQUERY($enrolment.encounters, $encounter, $encounter.encounterType.name = 'QRT Child Followup' and $encounter.voided = false ).@count > 0 and voided = false).@count > 0`)\n        .filter((individual) => individual.voided === false  && _.some(individual.enrolments, enrolment => qrtChildFollowUpDue(enrolment)\n        ))\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "fdea8428-2197-4fc5-bf5e-af77a90a8b4d",
  "id" : 1394,
  "name" : "Due visits for Delivery",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    \n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    };    \n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'Delivery') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)        \n        .map(enc => enc.programEnrolment.individual)\n\n\n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "ef8f89d1-ab13-4018-8e63-02ef11bcbebf",
  "id" : 1379,
  "name" : "Overdue visits for ANC",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let lst =  params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'ANC') and  maxVisitDateTime <= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n\n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n    \n    return lst;\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "5517b13f-2320-4895-af00-5386d0207711",
  "id" : 1396,
  "name" : "Due for NRC (voided~2914)",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n\n'use strict';\n({params, imports}) => {\nconst _ = imports.lodash;\nconst moment = imports.moment;\n\nconst nrcDue = (enrolment) => {\n    const nrcEnc = enrolment.scheduledEncountersOfType('NRC');\n    \n    const nrc = nrcEnc\n    .filter((e) => moment().isSameOrAfter(moment(e.earliestVisitDateTime)) && moment().isSameOrBefore(moment(e.maxVisitDateTime)) && e.cancelDateTime === null && e.encounterDateTime === null );\n    \n    return nrc.length > 0 ? true : false;\n    \n    };\n\n    return params.db.objects('Individual')\n        .filtered(`SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Child' and $enrolment.programExitDateTime = null and $enrolment.voided = false and SUBQUERY($enrolment.encounters, $encounter, $encounter.encounterType.name = 'NRC' and $encounter.voided = false ).@count > 0 and voided = false).@count > 0`)\n        .filter((individual) => individual.voided === false  && _.some(individual.enrolments, enrolment => nrcDue(enrolment)\n        ))\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : true
}, {
  "uuid" : "579edeb1-fd56-4997-bc2b-df92711373dd",
  "id" : 3101,
  "name" : "QRT Intervention Required?",
  "query" : "'use strict';\n({params, imports}) => {\n    const moment = imports.moment;\n    const QRT_INTERVENTION_CONCEPT_UUID = '3f11d680-4da0-43b9-a532-e080b855b9d6';\n    const YES_UUID = '8ebbf088-f292-483e-9084-7de919ce67b7';\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let indList = params.db.objects('ProgramEnrolment').filtered(`voided = false AND programExitDateTime = null AND program.name = 'Child' AND individual.voided = false AND SUBQUERY(encounters, $enc, $enc.encounterType.name = 'Medical Facilitation for Poshan Sathi' AND $enc.voided = false AND SUBQUERY($enc.observations, $obs, $obs.concept.uuid = '${QRT_INTERVENTION_CONCEPT_UUID}' AND $obs.valueJSON CONTAINS '${YES_UUID}').@count > 0).@count > 0`).filtered(query);\n\n    indList =  indList.filter(enrolment=>{\n        let ans = false;\n        const poshansathi_encounter = enrolment.lastFulfilledEncounter(\"Medical Facilitation for Poshan Sathi\");\n\n        if(poshansathi_encounter){\n            const qrt_encounter = enrolment.lastFulfilledEncounter(\"Medical Facilitation for QRT\");\n            if(qrt_encounter){\n                ans = !moment(qrt_encounter.encounterDateTime).isAfter(poshansathi_encounter.encounterDateTime);\n            } else {\n                ans = true;\n            }\n        }\n        return ans;\n    }).map(enrolment=>enrolment.individual);\n\n    return indList;\n};",
  "description" : "",
  "color" : "#7ce8cb",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "cdc19d43-8e4d-45c5-b3e6-21dba492eaae",
  "id" : 1380,
  "name" : "Overdue visits for PNC",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }; \n\n    return params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'PNC') and  maxVisitDateTime <= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n};",
  "description" : "",
  "color" : "#ee6983",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "cf6dfbe4-1b22-49c7-a620-615130ab0be7",
  "id" : 3102,
  "name" : "Monthly Training Done?",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n'use strict';\n({params, imports}) => {\n    const moment = imports.moment;\n    const currentDate = moment();\n    const currentMonth = currentDate.month(); \n    const currentYear = currentDate.year();\n\n    const pashanSathis = () => params.db.objects('Individual').filtered(\"voided == false and subjectType.name == 'TIMS for Poshan Sathi'\");\n    \n    function isCurrentMonth(encounterDateTime){\n\n        if(encounterDateTime == null) return false;\n        \n        const encounterDate = moment(encounterDateTime)\n        if(encounterDate.month() == currentMonth && encounterDate.year() == currentYear) return true;\n\n        return false;\n    }\n\n    const trainingEnc = params.db.objects('Encounter').filtered(\"voided = false and encounterType.name = 'Training'\")\n        \n    const isTrainingDone =  trainingEnc.some((enc)=> isCurrentMonth(enc.encounterDateTime));\n    \n    const colours = {\n        red: '#ff1300',\n        green: '#3cc936'\n    }\n    \n    const primaryValue = pashanSathis().length\n    const cardColor = isTrainingDone ? colours.green: colours.red;\n\n    return {\n        reportCards: [\n            {\n                cardColor: cardColor,\n                primaryValue: primaryValue,   \n                secondaryValue: null,\n                lineListFunction: pashanSathis\n            }\n        ]\n    };\n};",
  "description" : "Green indicates completed and Red indicates not completed",
  "color" : "#8b3e75",
  "nested" : true,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "d1bb6b10-d7fb-4891-b928-5791c753af56",
  "id" : 1395,
  "name" : "Due visits for PW Home Visit",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let lst =  params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'PW Home Visit') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)  \n        \n  lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n  \n  return lst; \n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "1376248d-7f82-472a-8674-81791ea378f5",
  "id" : 2743,
  "name" : "Growth Faltering-2",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n \n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Individual')\n        .filtered(`voided = false AND enrolments.voided = false AND enrolments.program.name = 'Child' AND enrolments.programExitDateTime = null AND voided = false`)\n        .filtered(`SUBQUERY(observations, $observation, $observation.concept.uuid = 'a9d8db9a-8411-412c-82ed-e6e177353561' and $observation.valueJSON CONTAINS 'GF2').@count > 0 `)\n        .filtered(`${query}`)\n        .filter((individual) => individual.getAgeInYears() <= 5)\n};",
  "description" : "",
  "color" : "#c47f23",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "ff1ce5a0-3d5a-46c9-9914-23a29893ed9d",
  "id" : 2744,
  "name" : "Total children enrolled in CMAM program",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    return params.db.objects('Individual')\n        .filtered(`voided = false AND enrolments.voided = false AND enrolments.program.name = 'Child' AND enrolments.programExitDateTime = null `)\n        .filtered(\"SUBQUERY(observations, $observation, ($observation.concept.uuid = '001b3307-731e-4606-a8f4-9aaa1e264000' and ($observation.valueJSON  CONTAINS '8ebbf088-f292-483e-9084-7de919ce67b7'))).@count > 0\")\n        .filtered(`${query}`)\n};",
  "description" : "",
  "color" : "#2196f3",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "fb76dd4c-b8f0-4d01-8761-5bdc27638a0d",
  "id" : 2738,
  "name" : "Current Pregnant Women",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n\n\"use strict\";\n({ params, imports }) => {\n  const _ = imports.lodash;\n  const moment = imports.moment;\n  \n  let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n    \n  \n\n  let lst = params.db.objects(\"Individual\")\n    .filtered(\n        `SUBQUERY(\n            enrolments, $enrolment, $enrolment.program.name = 'Pregnancy' AND \n            $enrolment.programExitDateTime = null AND $enrolment.voided = false AND \n            SUBQUERY(\n                $enrolment.encounters, $encounter, $encounter.encounterType.name = 'Delivery' AND \n                $encounter.voided = false AND \n                $encounter.encounterDateTime != null AND \n                $encounter.cancelDateTime = null\n            ).@count = 0 \n            AND voided = false\n        ).@count > 0\n        AND voided = false`\n    ).filtered(`${query}`);\n  \n      \n  return lst;\n};",
  "description" : "",
  "color" : "#4d80b0",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "0e714a13-fde5-49b0-89d0-4f275e93fff5",
  "id" : 2180,
  "name" : "Number of growth monitoring visits due this month",
  "query" : "'use strict';\n({params, imports}) => {\n    const moment = imports.moment;\n    const startOfMonth = moment().startOf('month').toDate();\n    const endOfMonth = moment().endOf('month').toDate();\n    var date = new Date();\n    date.setFullYear(date.getFullYear() - 5);\n\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    };  \n\n    const realmQuery = `\n        voided = false AND\n        dateOfBirth >= $2 AND\n        SUBQUERY(enrolments, $enrolment,\n            $enrolment.program.name = 'Child' AND\n            $enrolment.programExitDateTime = null AND\n            $enrolment.voided = false AND\n            SUBQUERY($enrolment.encounters, $encounter,\n                $encounter.encounterType.name = 'Growth Monitoring' AND\n                $encounter.voided = false AND\n                $encounter.cancelDateTime = null AND\n                $encounter.encounterDateTime = null AND\n                $encounter.earliestVisitDateTime >= $0 AND\n                $encounter.earliestVisitDateTime <= $1\n            ).@count > 0\n        ).@count > 0\n    `;\n\n    return params.db.objects('Individual')\n        .filtered(realmQuery, startOfMonth, endOfMonth, date)\n        .filtered(query);\n};",
  "description" : "Growth Monitoring due for current month",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "374053d2-6ff1-495c-a272-dce1a86df587",
  "id" : 1743,
  "name" : "MAM children",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    }\n\n\n    return params.db.objects('Individual')\n        .filtered(`voided = false AND enrolments.voided = false AND enrolments.program.name = 'Child' AND enrolments.programExitDateTime = null `)\n        .filtered(\"SUBQUERY(observations, $observation, ($observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' and ($observation.valueJSON  CONTAINS 'MAM'))OR ($observation.concept.uuid = '053b4f97-eacf-4f20-9d68-d6850966ce93' and ($observation.valueJSON  CONTAINS 'Moderately Underweight'))).@count > 0\")\n        .filtered(`${query}`)\n        .filter((individual) => individual.getAgeInYears() <= 5)\n};",
  "description" : "",
  "color" : "#FFBF40",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "228f024c-c5ad-4b52-9dff-c92ab65398b4",
  "id" : 1388,
  "name" : "Due visits for QRT PW",
  "query" : "// Documentation - https://docs.mongodb.com/realm-legacy/docs/javascript/latest/index.html#queries\n'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n    \n    let lst = params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Pregnancy' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'QRT PW') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`,date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual) \n        \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n    \n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "34bf9d6a-96bb-442b-99f0-f860b36486c9",
  "id" : 2741,
  "name" : "Number of growth monitoring visits done this month",
  "query" : "'use strict';\n({params, imports}) => {\n    const moment = imports.moment;\n    const startOfMonth = moment().startOf('month').toDate();\n    const endOfMonth = moment().endOf('month').toDate();\n    var date = new Date();\n    date.setFullYear(date.getFullYear() - 5);\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n    };  \n\n    return params.db.objects('Individual')\n        .filtered(`voided=false AND dateOfBirth >= $2 AND SUBQUERY(enrolments, $enrolment, $enrolment.program.name = 'Child' AND $enrolment.programExitDateTime = null AND $enrolment.voided = false AND SUBQUERY($enrolment.encounters, $encounter, $encounter.encounterType.name = 'Growth Monitoring' AND $encounter.voided = false AND $encounter.encounterDateTime >= $0 AND $encounter.encounterDateTime <= $1).@count > 0).@count > 0`, startOfMonth, endOfMonth, date)\n        .filtered(query);\n};",
  "description" : "",
  "color" : "#f4bb59",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "14937ab7-b8d0-4d06-93b6-a874a49b72a6",
  "id" : 822,
  "name" : "Total enrolments in child program",
  "query" : "'use strict';\n({params, imports}) => {\n\n    let addressValue = null;\n\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n\n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `lowestAddressLevel.uuid IN ${output}`;\n\n    }\n\n    let lst = params.db.objects('Individual')\n        .filtered(`voided = false AND subjectType.name = 'Individual' AND\n            SUBQUERY(enrolments, $enrolment, $enrolment.programExitDateTime = null and $enrolment.program.name = 'Child' and $enrolment.voided = false).@count > 0\n            `).filtered(`${query}`)\n\n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n    \n    return lst;\n};",
  "description" : "",
  "color" : "#2196f3",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
}, {
  "uuid" : "ec717e09-ee5f-4bcb-bb1d-690a3c6f8d35",
  "id" : 1392,
  "name" : "Due for QRT SAM child",
  "query" : "'use strict';\n({params, imports}) => {\n    const _ = imports.lodash;\n    var date = new Date();\n    let addressValue = null;\n    if (params.ruleInput) {\n        let addressFilter = params.ruleInput.filter(rule => rule.type === \"Address\");\n\n        if (addressFilter.length > 0 && addressFilter[0].filterValue) {\n            addressValue = addressFilter[0].filterValue.filter((add) => add.type == \"Village/Hamlet\").map(add => add.uuid);\n        }\n    }\n    \n    let query = 'voided=false ';\n\n    if (addressValue != null) {\n        let output = `{${addressValue.map(item => `'${item}'`).join(', ')}}`;\n        query = `programEnrolment.individual.lowestAddressLevel.uuid IN ${output}`;\n    }\n\n    let lst =  params.db.objects('ProgramEncounter')\n        .filtered(`programEnrolment.individual.voided = false AND programEnrolment.voided = false AND programEnrolment.program.name = 'Child' AND programEnrolment.programExitDateTime = null AND voided = false AND encounterDateTime == null and earliestVisitDateTime <> null AND (encounterType.name = 'QRT Child') and earliestVisitDateTime <= $0 and maxVisitDateTime >= $0 and cancelDateTime == null`, date)\n        .filtered(`${query}`)\n        .map(enc => enc.programEnrolment.individual)\n        \n    lst = _.sortBy(lst, [ind => (ind.name || '').toLowerCase()]);\n    \n    return lst;\n};",
  "description" : "",
  "color" : "#f7a76c",
  "nested" : false,
  "count" : 1,
  "standardReportCardInputSubjectTypes" : [ ],
  "standardReportCardInputPrograms" : [ ],
  "standardReportCardInputEncounterTypes" : [ ],
  "voided" : false
} ]