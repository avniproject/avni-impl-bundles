{
  "name" : "QRT Child",
  "uuid" : "d8c3e537-284e-47a3-8c1f-013c37f301bd",
  "formType" : "ProgramEncounter",
  "formElementGroups" : [ {
    "uuid" : "116d4460-64e7-4244-8123-d96336ba7ad2",
    "name" : "Details",
    "displayOrder" : 1.0,
    "formElements" : [ {
      "name" : "Height",
      "uuid" : "770d524d-4f30-45f4-af07-efa67b5dd120",
      "keyValues" : [ {
        "key" : "editable",
        "value" : false
      } ],
      "concept" : {
        "name" : "Height",
        "uuid" : "346902c4-9938-4ba5-90d1-587f36f1ab92",
        "dataType" : "Numeric",
        "answers" : [ ],
        "lowAbsolute" : 40.0,
        "highAbsolute" : 150.0,
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 1.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n\n  let obs = programEncounter.programEnrolment.findLatestObservationFromEncounters('Height', programEncounter);\n  \n   if(obs)\n  {\n  value=obs.getReadableValue();\n  }\n    \n    \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "mandatory" : false
    }, {
      "name" : "Weight",
      "uuid" : "32633ed8-1246-47cf-88cd-fbc6077e500e",
      "keyValues" : [ {
        "key" : "editable",
        "value" : false
      } ],
      "concept" : {
        "name" : "Weight",
        "uuid" : "8b187dda-a88e-487a-981a-0e4cb6142904",
        "dataType" : "Numeric",
        "answers" : [ ],
        "lowAbsolute" : 1.0,
        "highAbsolute" : 100.0,
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 2.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n\n  const weight = programEncounter.programEnrolment.findLatestObservationFromEncounters('8b187dda-a88e-487a-981a-0e4cb6142904', programEncounter);\n  \n  if(weight) value = weight.getReadableValue();\n    \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "mandatory" : false
    }, {
      "name" : "Date of referral",
      "uuid" : "5cd067c9-b859-4153-a4c6-e96b2eaf4655",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of referral",
        "uuid" : "892a03ad-558e-47f5-90f6-65075cf81628",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 3.0,
      "type" : "SingleSelect",
      "rule" : "//SAMPLE RULE EXAMPLE\n'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  \n  let dateOfReferral = programEncounter.getObservationReadableValue('Date of referral');\n  let visitDate = programEncounter.encounterDateTime;  \n  let dob = programEncounter.programEnrolment.individual.dateOfBirth;\n  \n  if(imports.moment(dateOfReferral).isBefore(dob, 'date')){\n statusBuilder.validationError(\"Date of referral cannot be before child's date of birth\");\n }\n \n if(imports.moment(dateOfReferral).isAfter(visitDate, 'date')){\n statusBuilder.validationError(\"Date of referral cannot be after Visit Date\");\n }\n\n  return statusBuilder.build();\n};",
      "mandatory" : false
    }, {
      "name" : "QRT facilitated child to medical facility?",
      "uuid" : "e0c4452d-a8f6-4a4d-80d5-be9b0b09b737",
      "keyValues" : [ ],
      "concept" : {
        "name" : "QRT facilitated child to medical facility?",
        "uuid" : "71abd5c7-cdcb-4148-a0d6-0f4790f8f072",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "8ebbf088-f292-483e-9084-7de919ce67b7",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "a77bd700-1409-4d52-93bc-9fe32c0e169b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 4.0,
      "type" : "SingleSelect",
      "mandatory" : true
    }, {
      "name" : "If no, reasons",
      "uuid" : "16036bc2-a0f8-41a7-b80f-914a2e54b268",
      "keyValues" : [ ],
      "concept" : {
        "name" : "If no, reasons",
        "uuid" : "43fb5619-ecf3-48c2-8c3b-8738ef329eca",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Treated at home",
          "uuid" : "607d12eb-2c80-4d68-904e-d530d6feafde",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Child not at home",
          "uuid" : "4807b222-b756-4afb-8a93-ea0c07f97541",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Parents did not consent",
          "uuid" : "64faa5be-cc17-497d-a919-3a4737c08187",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Other",
          "uuid" : "f169230d-809b-4d06-9ccb-96586977bb68",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 5.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Scheduled for some other day",
          "uuid" : "b00cbb8a-4fcb-4fbf-8b46-96a29d10be81",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 5.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"71abd5c7-cdcb-4148-a0d6-0f4790f8f072\").containsAnswerConceptName(\"a77bd700-1409-4d52-93bc-9fe32c0e169b\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "QRT facilitated child to medical facility?",
                "conceptUuid" : "71abd5c7-cdcb-4148-a0d6-0f4790f8f072",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "No" ],
                "answerConceptUuids" : [ "a77bd700-1409-4d52-93bc-9fe32c0e169b" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "if other, please specify",
      "uuid" : "744277fb-b893-4fe3-a279-ba61057e2a5e",
      "keyValues" : [ ],
      "concept" : {
        "name" : "if other, please specify",
        "uuid" : "2d894c31-2426-4867-a363-bff44ba847da",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 6.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"43fb5619-ecf3-48c2-8c3b-8738ef329eca\").containsAnswerConceptName(\"f169230d-809b-4d06-9ccb-96586977bb68\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "If no, reasons",
                "conceptUuid" : "43fb5619-ecf3-48c2-8c3b-8738ef329eca",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Other" ],
                "answerConceptUuids" : [ "f169230d-809b-4d06-9ccb-96586977bb68" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "If QRT did not facilitate child to medical facility, mention the reasons",
      "uuid" : "9510b544-84d9-4c89-87a5-61a6f7b56ea9",
      "keyValues" : [ ],
      "concept" : {
        "name" : "If QRT did not facilitate child to medical facility, mention the reasons",
        "uuid" : "1b11877c-1967-4599-ac33-a3fc21736a5e",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 7.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"71abd5c7-cdcb-4148-a0d6-0f4790f8f072\").containsAnswerConceptName(\"a77bd700-1409-4d52-93bc-9fe32c0e169b\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "QRT facilitated child to medical facility?",
                "conceptUuid" : "71abd5c7-cdcb-4148-a0d6-0f4790f8f072",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "No" ],
                "answerConceptUuids" : [ "a77bd700-1409-4d52-93bc-9fe32c0e169b" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Date of facilitation to medical facility",
      "uuid" : "f8dcc02a-def6-48f0-b191-f5c5f125be30",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of facilitation to medical facility",
        "uuid" : "6f027741-4dec-45d7-8b54-3e697597c354",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 8.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"71abd5c7-cdcb-4148-a0d6-0f4790f8f072\").containsAnswerConceptName(\"8ebbf088-f292-483e-9084-7de919ce67b7\").matches();\n  \n  visibility = condition11 ;\n\n  let selectedDate = programEncounter.getObservationValue('6f027741-4dec-45d7-8b54-3e697597c354');\n  let dateOfBirth = programEncounter.programEnrolment.individual.dateOfBirth;\n    \n  if(selectedDate && dateOfBirth) {\n    \n    const currentDate = moment().startOf('day');\n    selectedDate = moment(selectedDate).startOf('day');\n    dateOfBirth = moment(dateOfBirth).startOf('day');\n    \n     if (selectedDate.isAfter(currentDate)) {\n      validationErrors.push(\"Invalid date: Future dates are not allowed.\");\n    }\n    \n    if (selectedDate.isBefore(dateOfBirth)) {\n      validationErrors.push(\"Invalid date: Selected date cannot be earlier than the date of birth.\");\n    }\n}\n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "mandatory" : true
    }, {
      "name" : "QRT vehicle used for facilitation to medical facility?",
      "uuid" : "7806e054-c2a4-42cf-a9c0-77da1bacbca8",
      "keyValues" : [ ],
      "concept" : {
        "name" : "QRT vehicle used for facilitation to medical facility",
        "uuid" : "08715fb4-9c33-4fa9-9ff0-05df8be22a7c",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "No",
          "uuid" : "a77bd700-1409-4d52-93bc-9fe32c0e169b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Yes",
          "uuid" : "8ebbf088-f292-483e-9084-7de919ce67b7",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 9.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"71abd5c7-cdcb-4148-a0d6-0f4790f8f072\").containsAnswerConceptName(\"8ebbf088-f292-483e-9084-7de919ce67b7\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "QRT facilitated child to medical facility?",
                "conceptUuid" : "71abd5c7-cdcb-4148-a0d6-0f4790f8f072",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "8ebbf088-f292-483e-9084-7de919ce67b7" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Place of referral",
      "uuid" : "6541c016-2e9e-4f77-bd36-e598445080c6",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Place of referral",
        "uuid" : "b5b29ca3-7158-4784-8a2a-fc6c527ddc18",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "DH/MC",
          "uuid" : "875c6feb-78a1-4be8-ae6c-027fb997c14e",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "CHC",
          "uuid" : "7f0d8995-6b14-4d2c-b285-9e1c0bb3d03b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "PHC",
          "uuid" : "19891cc9-2dc5-47b9-8a42-30d7bb63934c",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Home",
          "uuid" : "b0a00c8b-b190-41a0-8b65-1afb0db00a81",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Other Govt facility",
          "uuid" : "d6408381-bfb8-4444-a68f-407288c5deb3",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 10.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "Cause of illness",
      "uuid" : "a26d33cb-5df2-480d-a6ad-46da2e70557f",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Cause of illness",
        "uuid" : "7de7de1e-10dd-46f2-a5c3-bfb056a41318",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Sickle cell anemia",
          "uuid" : "4b0c2486-20ac-458b-b89a-28603715aeb2",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 7.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Cold and cough",
          "uuid" : "1a1e2b03-2e03-43ed-8eb2-f2840d8786a5",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 6.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dengue",
          "uuid" : "766953f6-6632-40d2-b850-8bd253a5334f",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 5.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Malaria",
          "uuid" : "1572682c-5aeb-4455-a7cf-a43da6a1e6fd",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Measles",
          "uuid" : "761e2baa-2747-44c4-84cd-6f3887b8838c",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Pneumonia",
          "uuid" : "1b3f4523-91f3-425e-9a4f-33ff06d176ae",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Diarrhea",
          "uuid" : "fd904c6a-fe26-46b0-b123-ac46d5c9567b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Others",
          "uuid" : "caf114c0-b81a-4606-8157-73144c8d3b1f",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 8.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 11.0,
      "type" : "MultiSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"71abd5c7-cdcb-4148-a0d6-0f4790f8f072\").containsAnswerConceptName(\"8ebbf088-f292-483e-9084-7de919ce67b7\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "QRT facilitated child to medical facility?",
                "conceptUuid" : "71abd5c7-cdcb-4148-a0d6-0f4790f8f072",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "8ebbf088-f292-483e-9084-7de919ce67b7" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Cause of illness (Other)",
      "uuid" : "b0bbfe76-ee6a-40df-a76b-22a8fdbd1e1e",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Cause of illness (Other)",
        "uuid" : "0e1d0c17-62d7-4c24-be93-62f326943c32",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 12.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"7de7de1e-10dd-46f2-a5c3-bfb056a41318\").containsAnswerConceptName(\"caf114c0-b81a-4606-8157-73144c8d3b1f\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Cause of illness",
                "conceptUuid" : "7de7de1e-10dd-46f2-a5c3-bfb056a41318",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Others" ],
                "answerConceptUuids" : [ "caf114c0-b81a-4606-8157-73144c8d3b1f" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : false
    }, {
      "name" : "Referral advice",
      "uuid" : "4f7f445e-4f8a-42b8-b493-6d5a91abf47f",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Advice given",
        "uuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Other Higher Medical Facility",
          "uuid" : "cb6dd2c2-25f3-4fce-8826-1b0ef18643af",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 5.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Treated at home (only with home food)",
          "uuid" : "c468b2ea-65e1-4447-940f-46a37d3d483f",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Referred to NRC",
          "uuid" : "a5e087e8-7ffa-4a0a-a4c0-d42579612e9c",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Treated at home along with supplemnetray medicines",
          "uuid" : "2d48bd37-416d-4776-b7a6-6240636e4191",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Referred to DHH / Other Higher Medical Facility (voided~265807)",
          "uuid" : "1a502361-c338-42f2-9888-2414831f0a4d",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ],
          "voided" : true
        }, {
          "name" : "Referred to DHH",
          "uuid" : "a2d66ed6-3ad3-4b9e-929d-1240c9803bd9",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 13.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"71abd5c7-cdcb-4148-a0d6-0f4790f8f072\").containsAnswerConceptName(\"8ebbf088-f292-483e-9084-7de919ce67b7\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "QRT facilitated child to medical facility?",
                "conceptUuid" : "71abd5c7-cdcb-4148-a0d6-0f4790f8f072",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Yes" ],
                "answerConceptUuids" : [ "8ebbf088-f292-483e-9084-7de919ce67b7" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Other Higher Medical Facility, please specify",
      "uuid" : "0ecbca16-cfbc-42c3-984b-8edafb1fca52",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Other Higher Medical Facility, please specify",
        "uuid" : "10064d39-cba4-4137-bf2a-2a262e557598",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 14.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"cb6dd2c2-25f3-4fce-8826-1b0ef18643af\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Other Higher Medical Facility" ],
                "answerConceptUuids" : [ "cb6dd2c2-25f3-4fce-8826-1b0ef18643af" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Who facilitated for Referred to DHH",
      "uuid" : "305ac177-eeff-497c-a972-e748f2088f29",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Who facilitated for Referred to DHH",
        "uuid" : "1dae0105-79c0-4d63-a516-157a549ecfed",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Child did not visit Medical Facility",
          "uuid" : "e66c8dfa-f20b-45b8-b1e1-fc0918a29860",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "QRT",
          "uuid" : "80b40574-ec62-4d06-a39b-7a1eecb6e400",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Self",
          "uuid" : "6f97d333-38c6-4652-8d76-e2fe25f46e69",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "ASHA",
          "uuid" : "b738ce8f-ada1-4de2-abcc-a602513c75f5",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "ANM/RBSK/CHO",
          "uuid" : "c7fe04de-4ce7-4db0-aae3-ae5368234fd7",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 15.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a2d66ed6-3ad3-4b9e-929d-1240c9803bd9\").matches();\n  \n  const condition21 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"cb6dd2c2-25f3-4fce-8826-1b0ef18643af\").matches();\n  \n  visibility = condition11 || condition21 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "conjunction" : "or",
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Referred to DHH" ],
                "answerConceptUuids" : [ "a2d66ed6-3ad3-4b9e-929d-1240c9803bd9" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        }, {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Other Higher Medical Facility" ],
                "answerConceptUuids" : [ "cb6dd2c2-25f3-4fce-8826-1b0ef18643af" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Reasons for child not visiting medical facility",
      "uuid" : "b9ceb0fd-4767-4a13-8316-bf1a221afd43",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Reasons for child not visiting medical facility",
        "uuid" : "75bb11db-ee53-4886-b910-6b670acf5a81",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Scheduled for some other day",
          "uuid" : "b00cbb8a-4fcb-4fbf-8b46-96a29d10be81",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Child not at home",
          "uuid" : "4807b222-b756-4afb-8a93-ea0c07f97541",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Parents did not consent",
          "uuid" : "64faa5be-cc17-497d-a919-3a4737c08187",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 16.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"1dae0105-79c0-4d63-a516-157a549ecfed\").containsAnswerConceptName(\"e66c8dfa-f20b-45b8-b1e1-fc0918a29860\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Who facilitated for Referred to DHH",
                "conceptUuid" : "1dae0105-79c0-4d63-a516-157a549ecfed",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Child did not visit Medical Facility" ],
                "answerConceptUuids" : [ "e66c8dfa-f20b-45b8-b1e1-fc0918a29860" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Date of facilitation to DHH / Other Higher Medical Facility",
      "uuid" : "8855943b-39e1-44fe-98d9-7e7b0b5020ef",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of facilitation to DHH / Other Higher Medical Facility",
        "uuid" : "0530f5dc-19df-4cc4-b4aa-5bac4129a0d7",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 17.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a2d66ed6-3ad3-4b9e-929d-1240c9803bd9\").matches();\n  \n  const condition21 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"cb6dd2c2-25f3-4fce-8826-1b0ef18643af\").matches();\n  \n  visibility = condition11 || condition21 ;\n  \n  let selectedDate = programEncounter.getObservationValue(\"0530f5dc-19df-4cc4-b4aa-5bac4129a0d7\");\n\n  if(selectedDate){\n    selectedDate = moment(selectedDate).startOf('day');\n    let dob = moment(programEncounter.programEnrolment.individual.dateOfBirth).startOf('day');\n    const currentDate = moment().startOf('day');\n    if(dob.isAfter(selectedDate)){\n      validationErrors.push(\"Selected date cannot be before child's date of birth.\");\n    }\n    if(selectedDate.isAfter(currentDate)){\n      validationErrors.push(\"Selected date cannot be after today's date.\");\n    }\n  }\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "mandatory" : true
    }, {
      "name" : "QRT vehicle used for facilitation to DHH / Other Higher Medical Facility",
      "uuid" : "ea11183b-8542-43b8-958e-acf479dd54d3",
      "keyValues" : [ ],
      "concept" : {
        "name" : "QRT vehicle used for facilitation to DHH / Other Higher Medical Facility",
        "uuid" : "c3c79468-f855-4ff1-b893-a66a3cec05d4",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "8ebbf088-f292-483e-9084-7de919ce67b7",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "a77bd700-1409-4d52-93bc-9fe32c0e169b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 18.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a2d66ed6-3ad3-4b9e-929d-1240c9803bd9\").matches();\n  \n  const condition21 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"cb6dd2c2-25f3-4fce-8826-1b0ef18643af\").matches();\n  \n  visibility = condition11 || condition21 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "conjunction" : "or",
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Referred to DHH" ],
                "answerConceptUuids" : [ "a2d66ed6-3ad3-4b9e-929d-1240c9803bd9" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        }, {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Other Higher Medical Facility" ],
                "answerConceptUuids" : [ "cb6dd2c2-25f3-4fce-8826-1b0ef18643af" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Cause of illness",
      "uuid" : "3fbbda72-22ad-4447-bd91-727c78344c09",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Cause of illness - Referred to DHH",
        "uuid" : "9940de0d-c1ab-4e77-871a-74b6b7c5291f",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Pneumonia",
          "uuid" : "1b3f4523-91f3-425e-9a4f-33ff06d176ae",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Measles",
          "uuid" : "761e2baa-2747-44c4-84cd-6f3887b8838c",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dengue",
          "uuid" : "766953f6-6632-40d2-b850-8bd253a5334f",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Cold and cough",
          "uuid" : "1a1e2b03-2e03-43ed-8eb2-f2840d8786a5",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 5.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Other causes of illness",
          "uuid" : "d1451e09-48d4-4cb1-883c-adb3ea37fe2d",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 6.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Diarrhea",
          "uuid" : "fd904c6a-fe26-46b0-b123-ac46d5c9567b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Malaria",
          "uuid" : "1572682c-5aeb-4455-a7cf-a43da6a1e6fd",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 19.0,
      "type" : "MultiSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a2d66ed6-3ad3-4b9e-929d-1240c9803bd9\").matches();\n  \n  const condition21 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"cb6dd2c2-25f3-4fce-8826-1b0ef18643af\").matches();\n  \n  visibility = condition11 || condition21 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "conjunction" : "or",
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Referred to DHH" ],
                "answerConceptUuids" : [ "a2d66ed6-3ad3-4b9e-929d-1240c9803bd9" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        }, {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Advice given",
                "conceptUuid" : "4e04b445-61ff-45de-a48a-3b2fb362e2a6",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Other Higher Medical Facility" ],
                "answerConceptUuids" : [ "cb6dd2c2-25f3-4fce-8826-1b0ef18643af" ]
              },
              "operator" : "containsAnswerConceptName"
            } ],
            "conjunction" : "and"
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Cause of illness (Other)",
      "uuid" : "51151e87-107c-45b8-8490-5606d963f761",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Other Cause of illness",
        "uuid" : "c8d0c448-b43e-47c0-bd9f-e9c27806e3da",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 20.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"9940de0d-c1ab-4e77-871a-74b6b7c5291f\").containsAnswerConceptName(\"d1451e09-48d4-4cb1-883c-adb3ea37fe2d\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Cause of illness - Referred to DHH",
                "conceptUuid" : "9940de0d-c1ab-4e77-871a-74b6b7c5291f",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "Other causes of illness" ],
                "answerConceptUuids" : [ "d1451e09-48d4-4cb1-883c-adb3ea37fe2d" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : false
    }, {
      "name" : "Advice during discharge from Referred to DHH / Other Higher Medical Facility",
      "uuid" : "078b7e3c-56ae-47f2-bb22-f9810304508a",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Advice during discharge from Referred to DHH / Other Higher Medical Facility",
        "uuid" : "ec852544-460e-444d-b8c0-8966ff5ddde5",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Follow-up visit",
          "uuid" : "32e9e619-8802-462d-99ba-ed2d836b2291",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Any kind of surgery",
          "uuid" : "7441ecb8-b5d5-4029-ae90-896ec29f02c2",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Medication",
          "uuid" : "6a32401d-6cad-4a9a-aa93-4c3bb67e6e61",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Diet and Rest",
          "uuid" : "b480b697-9f0b-4681-af78-b417aef7c32b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 21.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const formElement = params.formElement;\n  const _ = imports.lodash;\n  let visibility = true;\n  let value = null;\n  let answersToSkip = [];\n  let validationErrors = [];\n  \n  const condition11 = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"1dae0105-79c0-4d63-a516-157a549ecfed\").containsAnswerConceptName(\"80b40574-ec62-4d06-a39b-7a1eecb6e400\").matches();\n  \n  visibility = condition11 ;\n  \n  return new imports.rulesConfig.FormElementStatus(formElement.uuid, visibility, value, answersToSkip, validationErrors);\n};",
      "declarativeRule" : [ {
        "actions" : [ {
          "actionType" : "showFormElement"
        }, { } ],
        "conditions" : [ {
          "compoundRule" : {
            "rules" : [ {
              "lhs" : {
                "type" : "concept",
                "scope" : "encounter",
                "conceptName" : "Who facilitated for Referred to DHH / Other Higher Medical Facility",
                "conceptUuid" : "1dae0105-79c0-4d63-a516-157a549ecfed",
                "conceptDataType" : "Coded"
              },
              "rhs" : {
                "type" : "answerConcept",
                "answerConceptNames" : [ "QRT" ],
                "answerConceptUuids" : [ "80b40574-ec62-4d06-a39b-7a1eecb6e400" ]
              },
              "operator" : "containsAnswerConceptName"
            } ]
          }
        } ]
      } ],
      "mandatory" : true
    }, {
      "name" : "Date of admission",
      "uuid" : "977e934a-aad7-4cce-b64d-a4f7e7bfbf72",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of admission",
        "uuid" : "317066ef-c52c-4d62-8bae-ad597ed1a709",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 22.0,
      "type" : "SingleSelect",
      "rule" : "//SAMPLE RULE EXAMPLE\n'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  \n  let dateOfAdmission = programEncounter.getObservationReadableValue('Date of admission');\n  let visitDate = programEncounter.encounterDateTime;  \n  let dob = programEncounter.programEnrolment.individual.dateOfBirth;\n  \n  if( dateOfAdmission && imports.moment(dateOfAdmission).isBefore(dob, 'date')){\n statusBuilder.validationError(\"Date of admission cannot be before child's date of birth\");\n }\n \n if( dateOfAdmission && imports.moment(dateOfAdmission).isAfter(visitDate, 'date')){\n statusBuilder.validationError(\"Date of admission cannot be after today's date\");\n }\n \n  const showCondition = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a5e087e8-7ffa-4a0a-a4c0-d42579612e9c\").matches();\n  \n  statusBuilder.show().whenItem(showCondition).is.truthy;\n\n  return statusBuilder.build();\n};",
      "mandatory" : false
    }, {
      "name" : "Date of Discharge",
      "uuid" : "292ea2d7-98d2-42a7-b568-f18c0d4c60c3",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Date of Discharge",
        "uuid" : "4d6f2b9a-dc9e-4baa-90ba-9d9e37605652",
        "dataType" : "Date",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 23.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  \n  \n  let dateOfAdmission = programEncounter.getObservationReadableValue('Date of admission');\n  let visitDate = programEncounter.encounterDateTime;  \n  let dateOfDischarge = programEncounter.getObservationReadableValue('4d6f2b9a-dc9e-4baa-90ba-9d9e37605652');  \n  \n  if( dateOfDischarge && imports.moment(dateOfDischarge).isBefore(dateOfAdmission, 'date')){\n statusBuilder.validationError(\"Date ofdischarge cannot be before date of admission\");\n }\n \n if( dateOfDischarge && imports.moment(dateOfDischarge).isAfter(visitDate, 'date')){\n statusBuilder.validationError(\"Date of discharge cannot be future date\");\n }\n  \n  const showCondition = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a5e087e8-7ffa-4a0a-a4c0-d42579612e9c\").matches();\n  \n  statusBuilder.show().whenItem(showCondition).is.truthy;\n\n  return statusBuilder.build();\n};",
      "mandatory" : false
    }, {
      "name" : "Height at Discharge",
      "uuid" : "875a388e-acd2-4c40-8959-79593503ab56",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Height at Discharge",
        "uuid" : "3ac094e8-347e-499b-911c-f6a386fca98a",
        "dataType" : "Numeric",
        "answers" : [ ],
        "lowAbsolute" : 40.0,
        "highAbsolute" : 150.0,
        "lowNormal" : 40.0,
        "highNormal" : 150.0,
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 24.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  \n  const showCondition = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a5e087e8-7ffa-4a0a-a4c0-d42579612e9c\").matches();\n  \n  statusBuilder.show().whenItem(showCondition).is.truthy;\n\n  return statusBuilder.build();\n};",
      "mandatory" : false
    }, {
      "name" : "Weight at Discharge",
      "uuid" : "3700d7e3-82af-4172-aad3-9668f2f29e5c",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Weight at Discharge",
        "uuid" : "06e4633a-70ae-4b6e-b570-3dc4056c8a40",
        "dataType" : "Numeric",
        "answers" : [ ],
        "lowAbsolute" : 1.0,
        "highAbsolute" : 50.0,
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 25.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  \n  const showCondition = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a5e087e8-7ffa-4a0a-a4c0-d42579612e9c\").matches();\n  \n  statusBuilder.show().whenItem(showCondition).is.truthy;\n\n  return statusBuilder.build();\n};",
      "mandatory" : false
    }, {
      "name" : "Medical complication at time of discharge",
      "uuid" : "732f7b20-c44b-4ce5-9ae8-d9191f7f0d77",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Medical complication at time of discharge",
        "uuid" : "26de1876-c271-4264-9751-388a3834514e",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 26.0,
      "type" : "SingleSelect",
      "rule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const formElement = params.formElement;\n  const statusBuilder = new imports.rulesConfig.FormElementStatusBuilder({programEncounter, formElement});\n  \n  const showCondition = new imports.rulesConfig.RuleCondition({programEncounter, formElement}).when.valueInEncounter(\"4e04b445-61ff-45de-a48a-3b2fb362e2a6\").containsAnswerConceptName(\"a5e087e8-7ffa-4a0a-a4c0-d42579612e9c\").matches();\n  \n  statusBuilder.show().whenItem(showCondition).is.truthy;\n\n  return statusBuilder.build();\n};",
      "mandatory" : false
    }, {
      "name" : "Advice",
      "uuid" : "ffcd54c5-f59a-4d2a-8ce1-60ca5df8af15",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Advice",
        "uuid" : "294f1568-6c64-4828-936c-576e8fdd564f",
        "dataType" : "Text",
        "answers" : [ ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 27.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "After delivery, when should you breastfed the child?",
      "uuid" : "61354a33-8d18-427b-b434-b8af78e3b334",
      "keyValues" : [ ],
      "concept" : {
        "name" : "After delivery, when should you breastfed the child",
        "uuid" : "44b9a530-a5fd-4641-95b2-f7248fa48185",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "In between 2 to 6 hours",
          "uuid" : "a836cdfb-4154-42f5-8855-3a05c323bb02",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Within one hour",
          "uuid" : "3a278a16-6797-4803-896b-935570a3c3b9",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dont know",
          "uuid" : "6efff09c-e027-49ae-b7c2-ff311dbdfd9b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "In between 7 to 24 hours",
          "uuid" : "f9032d1d-3bb3-453e-b47c-1a86db73dd15",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 28.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Do you know when should a child get vaccination?",
      "uuid" : "080ff82a-b001-45ec-971e-f34567b1de84",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Do you know when should a child get vaccination",
        "uuid" : "ca91ab72-912a-4725-aa73-9270c9b1fa8b",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Known",
          "uuid" : "d60498c0-a6c4-46e1-a0cd-416f68a7d18f",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dont know",
          "uuid" : "6efff09c-e027-49ae-b7c2-ff311dbdfd9b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Partially known",
          "uuid" : "1c618c97-9f0a-4256-826e-f9e16e111193",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 29.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Till what age the baby should be exclusively breastfed?",
      "uuid" : "80ff39bf-e7c0-4690-b1c6-3d3a4edbab0b",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Till what age the baby should be exclusively breastfed",
        "uuid" : "0f41743c-40e6-49e6-ac53-0a7aba5c8097",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "25 months and more",
          "uuid" : "7199ac7a-1929-4f08-8dba-131c90f06272",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "6 months",
          "uuid" : "a40b769a-7810-4e4b-9fa7-5222a281671e",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Less than 6 months",
          "uuid" : "aaf416d8-36d5-4f89-b1f3-2b0d6a5eaeac",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dont know",
          "uuid" : "6efff09c-e027-49ae-b7c2-ff311dbdfd9b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 5.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "7 to 12 months",
          "uuid" : "5f497574-2b82-4452-915a-7a20958e8fef",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "13 to 24 months",
          "uuid" : "cd298f88-9f5c-4365-b52e-bd80c94d6778",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 30.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Till what age the baby should be breastfed?",
      "uuid" : "f3fbd4c5-16f3-4ec9-a821-8d1420b6ae61",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Till what age the baby should be breastfed",
        "uuid" : "f2f52d36-82ca-4ce0-846e-507909b58bb5",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "One year",
          "uuid" : "a97c74bf-3b32-44e9-847d-b82c9ea9b265",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "6 months",
          "uuid" : "a40b769a-7810-4e4b-9fa7-5222a281671e",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dont know",
          "uuid" : "6efff09c-e027-49ae-b7c2-ff311dbdfd9b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "2 year",
          "uuid" : "52290a19-a2e9-4997-8476-7119a2137191",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "5 year",
          "uuid" : "5333be0c-e283-4985-9d54-48d13e2431b6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 31.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : false
    }, {
      "name" : "When should you fed the baby any outside food?",
      "uuid" : "0f264603-d9f9-430d-888f-1c413e81dd96",
      "keyValues" : [ ],
      "concept" : {
        "name" : "When should you fed the baby any outside food",
        "uuid" : "63c720e0-1ee3-4e5f-9596-2742ff6caf94",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "One year",
          "uuid" : "a97c74bf-3b32-44e9-847d-b82c9ea9b265",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "2 year",
          "uuid" : "52290a19-a2e9-4997-8476-7119a2137191",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 2.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "6 months",
          "uuid" : "a40b769a-7810-4e4b-9fa7-5222a281671e",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "5 year",
          "uuid" : "5333be0c-e283-4985-9d54-48d13e2431b6",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 3.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "Dont know",
          "uuid" : "6efff09c-e027-49ae-b7c2-ff311dbdfd9b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 4.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 32.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    }, {
      "name" : "Reffered to NRC (referred by govt facility)",
      "uuid" : "dba44375-5acd-4451-82e1-bbc7103c919e",
      "keyValues" : [ ],
      "concept" : {
        "name" : "Reffered to NRC (referred by govt facility)",
        "uuid" : "45113644-225c-43e9-8e31-b103732ea671",
        "dataType" : "Coded",
        "answers" : [ {
          "name" : "Yes",
          "uuid" : "8ebbf088-f292-483e-9084-7de919ce67b7",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 0.0,
          "active" : true,
          "media" : [ ]
        }, {
          "name" : "No",
          "uuid" : "a77bd700-1409-4d52-93bc-9fe32c0e169b",
          "dataType" : "NA",
          "answers" : [ ],
          "order" : 1.0,
          "active" : true,
          "media" : [ ]
        } ],
        "active" : true,
        "media" : [ ]
      },
      "displayOrder" : 33.0,
      "type" : "SingleSelect",
      "voided" : true,
      "mandatory" : true
    } ],
    "display" : "Details",
    "timed" : false
  } ],
  "decisionRule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const decisions = params.decisions;\n  const complicationsBuilderForWFA = new imports.rulesConfig.complicationsBuilder({\n        programEncounter: programEncounter,\n        complicationsConcept: \"Weight for age z-score\"\n    },\n    {\n        programEnrolment: programEncounter,\n        complicationsConcept: \"High risk condition\"\n    });\n    \n  const height = programEncounter.getObservationValue(\"Height\");\n  const weight = programEncounter.getObservationValue(\"Weight\");\n  \n  const heightAtDischarge = programEncounter.getObservationValue(\"Height at Discharge\");\n  const weightAtDischarge = programEncounter.getObservationValue(\"Weight at Discharge\");\n  \n  const asOnDate = programEncounter.encounterDateTime;\n  const individual = programEncounter.programEnrolment.individual;\n  const age = programEncounter.programEnrolment.individual.getAgeInMonths();\n  \n  const addIfRequired = (decisions, name, value) => {\n    if (value === -0) value = 0;\n    if (value !== undefined) decisions.push({name: name, value: value});\n};\n  \n  const getGradeforZscore = (zScore) => {\n    let grade;\n    if (zScore <= -3) {\n        grade = 3;\n    } else if (zScore > -3 && zScore < -2) {\n        grade = 2;\n    } else if (zScore >= -2) {\n        grade = 1;\n    }\n    return grade;\n};\n  \n  const zScoresForChild = ruleServiceLibraryInterfaceForSharingModules.common.getZScore(individual, asOnDate, weight, height);\n\n  const zScoresForChildAtDischarge = ruleServiceLibraryInterfaceForSharingModules.common.getZScore(individual, asOnDate, weightAtDischarge, heightAtDischarge);\n  \n  const zScoreGradeStatusMappingWeightForAge = {\n    '1': 'Normal',\n    '2': 'Moderately Underweight',\n    '3': 'Severely Underweight'\n};\n\n  const zScoreGradeStatusMappingHeightForAge = {\n    '1': 'Normal',\n    '2': 'Stunted',\n    '3': 'Severely stunted'\n};\n  \n  const zScoreGradeStatusMappingWeightForHeight = [\n    [\"SAM\", -3],\n    [\"MAM\", -2],\n    [\"Normal\", 1],\n    [\"Normal\", 2],\n    [\"Normal\", 3],\n    [\"Normal\", Infinity],\n];\n\n  const weightForHeightStatus = function (zScore) {\n let found = _.find(zScoreGradeStatusMappingWeightForHeight, function (currentStatus) {\n        return zScore <= currentStatus[1];\n    });\n    return found && found[0];\n};\n\n  \n   const wfaGrade = getGradeforZscore(zScoresForChild.wfa);\n  const wfaStatus = zScoreGradeStatusMappingWeightForAge[wfaGrade];\n  const wfaZScore= zScoresForChild.wfa;\n  \n  \n  \n  const wfhStatus = weightForHeightStatus(zScoresForChild.wfh);\n  const wfhGrade = getGradeforZscore(zScoresForChild.wfh);\n\n  \n  const hfaGrade = getGradeforZscore(zScoresForChild.hfa);\n  const hfaZScore = zScoresForChild.hfa;\n  const hfaStatus = zScoreGradeStatusMappingHeightForAge[hfaGrade];\n\n  const wfhStatusAtDischarge = weightForHeightStatus(zScoresForChildAtDischarge.wfh);\n  \naddIfRequired(decisions.encounterDecisions, \"Weight for age z-score\", zScoresForChild.wfa);\naddIfRequired(decisions.encounterDecisions, \"Weight for age Grade\", wfaGrade);\naddIfRequired(decisions.encounterDecisions, \"Weight for age Status\", wfaStatus ? [wfaStatus] : []);\n\naddIfRequired(decisions.encounterDecisions, \"Height for age z-score\", zScoresForChild.hfa);\naddIfRequired(decisions.encounterDecisions, \"Height for age Grade\", hfaGrade);\naddIfRequired(decisions.encounterDecisions, \"Height for age Status\", hfaStatus ? [hfaStatus] : []);\n\n\naddIfRequired(decisions.encounterDecisions, \"Weight for height z-score\", zScoresForChild.wfh);\naddIfRequired(decisions.encounterDecisions, \"Weight for Height Status\", wfhStatus ? [wfhStatus] : []);\n\naddIfRequired(decisions.encounterDecisions, \"Weight for Height Status at Discharge\", wfhStatusAtDischarge ? [wfhStatusAtDischarge] : []);\n\n    const encounterTypeNames = [\"Child followup\",\"QRT SAM Child\"];\nconst latest = programEncounter.programEnrolment.lastFulfilledEncounter(\"ANC\",\"Delivery\");\n\n\nif(latest === undefined || programEncounter.uuid === latest.uuid || imports.moment(programEncounter.encounterDateTime).isAfter(imports.moment(latest.encounterDateTime))){\n\n// Pushing decisions to the registration for the optimizing performance of offlne dashborad cards\n     if (wfhStatus) {\n            decisions.registrationDecisions.push({name: \"Nutritional Status\", value: wfhStatus})\n        }\n\n  if(wfhStatus == \"SAM\" || wfaStatus == \"Severely Underweight\"){\n      decisions.registrationDecisions.push({name : \"To be monitored by QRT\", value : \"Yes\"});\n      decisions.enrolmentDecisions.push({name : \"To be monitored by QRT\", value : \"Yes\"});\n      decisions.encounterDecisions.push({name : \"To be monitored by QRT\", value : \"Yes\"});\n  }else {\n      decisions.registrationDecisions.push({name : \"To be monitored by QRT\", value : \"No\"});\n      decisions.enrolmentDecisions.push({name : \"To be monitored by QRT\", value : \"No\"});\n      decisions.encounterDecisions.push({name : \"To be monitored by QRT\", value : \"No\"});\n  }\n}else {\n  if(wfhStatus == \"SAM\" || wfaStatus == \"Severely Underweight\"){\n      decisions.encounterDecisions.push({name : \"To be monitored by QRT\", value : \"Yes\"});\n  }else {\n      decisions.encounterDecisions.push({name : \"To be monitored by QRT\", value : \"No\"});\n  }\n}\n\n    return decisions;\n };",
  "visitScheduleRule" : "\"use strict\";\n({params, imports}) => {\n    const programEncounter = params.entity;\n    const _ = imports.lodash;\n    const scheduleBuilder = new imports.rulesConfig.VisitScheduleBuilder({\n        programEncounter\n    });\n\n    const takenToMedicalFacility = programEncounter.getObservationReadableValue(\"QRT facilitated child to medical facility?\") == \"Yes\";\n    const referredToNRC = programEncounter.getObservationReadableValue(\"Advice given\") == \"Referred to NRC\";\n    \n    function lastfilledEncounter(encounterType) {\n        const lastVisitEncounters = programEncounter.programEnrolment.getEncountersOfType(encounterType, false);\n        const latestEncounter = _.chain(lastVisitEncounters)\n            .filter((encounter) => encounter.encounterDateTime && encounter.voided == false)\n            .maxBy((encounter) => encounter.encounterDateTime)\n            .value();\n        return latestEncounter;\n    }\n\n    const qrtEncounter = lastfilledEncounter('Growth Monitoring');\n    if (qrtEncounter) {\n        const isSAMInLastGM = qrtEncounter ? qrtEncounter.getObservationReadableValue(\"Nutritional Status\") == \"SAM\" : false;\n        if (takenToMedicalFacility || isSAMInLastGM) {\n            scheduleBuilder.add({\n                name: 'Child Home Visit',\n                encounterType: 'Child Home Visit',\n                earliestDate: imports.moment(programEncounter.encounterDateTime).add(15, 'days').startOf('day').toDate(),\n                maxDate: imports.moment(programEncounter.encounterDateTime).add(22, 'days').endOf('day').toDate()\n            });\n        }\n  }\n    \n    if(referredToNRC){\n          scheduleBuilder.add({\n                name: 'NRC Admission',\n                encounterType: 'NRC Admission',\n                earliestDate: imports.moment(programEncounter.encounterDateTime).startOf('day').toDate(),\n                maxDate: imports.moment(programEncounter.encounterDateTime).add(60, 'days').endOf('day').toDate()\n            });\n    }\n\n\n    return scheduleBuilder.getAll();\n};",
  "validationRule" : "'use strict';\n({params, imports}) => {\n  const programEncounter = params.entity;\n  const moment = imports.moment;\n  const validationResults = [];\n  \n  const isMaxVisitDateTimeGreaterThanToday = moment(programEncounter.maxVisitDateTime).isBefore(moment(), 'day');\n\n  if (isMaxVisitDateTimeGreaterThanToday) {\n    validationResults.push(imports.common.createValidationError(\"You cannot complete an overdue visit. Please cancel this visit.\"));  \n  }\n  \n   \n  \n  return validationResults;\n};",
  "checklistsRule" : "",
  "decisionConcepts" : [ {
    "name" : "To be monitored by QRT",
    "uuid" : "be0ab05f-b0f3-43ec-b598-fdde0679104a",
    "dataType" : "Coded",
    "answers" : [ {
      "name" : "Yes",
      "uuid" : "8ebbf088-f292-483e-9084-7de919ce67b7",
      "dataType" : "NA",
      "answers" : [ ],
      "order" : 0.0,
      "active" : true,
      "media" : [ ]
    }, {
      "name" : "No",
      "uuid" : "a77bd700-1409-4d52-93bc-9fe32c0e169b",
      "dataType" : "NA",
      "answers" : [ ],
      "order" : 1.0,
      "active" : true,
      "media" : [ ]
    } ],
    "active" : true,
    "keyValues" : [ ],
    "media" : [ ]
  }, {
    "name" : "Weight for Height Status at Discharge",
    "uuid" : "8e54ddae-c724-4032-9cc2-6310b47f4702",
    "dataType" : "Coded",
    "answers" : [ {
      "name" : "SAM",
      "uuid" : "7d0229c1-e69e-4cac-8937-cdd48c8ed9dd",
      "dataType" : "NA",
      "answers" : [ ],
      "order" : 0.0,
      "abnormal" : true,
      "active" : true,
      "media" : [ ]
    }, {
      "name" : "MAM",
      "uuid" : "da518460-f4ab-4fcb-89ae-3526619d43c5",
      "dataType" : "NA",
      "answers" : [ ],
      "order" : 1.0,
      "abnormal" : true,
      "active" : true,
      "media" : [ ]
    }, {
      "name" : "Normal",
      "uuid" : "422604be-5776-4050-a779-9221935d6f7c",
      "dataType" : "NA",
      "answers" : [ ],
      "order" : 2.0,
      "active" : true,
      "media" : [ ]
    } ],
    "active" : true,
    "keyValues" : [ ],
    "media" : [ ]
  } ]
}